# AI Factory - Autonomous CRM Development Agent

> **Prototype**: Autonomous agent system that develops enterprise software from natural language requirements

## ğŸ“‹ Overview

This example demonstrates how to build an autonomous agent that can:
- Design data models from requirements
- Generate complete ObjectStack applications
- Create tests automatically
- Deploy to production via CI/CD
- Iterate based on feedback

## ğŸ¯ Capabilities

### 1. **Requirements Analysis**
Natural language â†’ Structured specifications

**Input:**
```
"Build a CRM with accounts, contacts, and opportunities. 
Accounts should have industries and revenue. 
Contacts belong to accounts. 
Opportunities track sales pipeline with stages."
```

**Output:**
- Parsed requirements document
- Object list with relationships
- UI requirements

### 2. **Data Model Generation**
Specifications â†’ ObjectStack Object Definitions

**Output:**
```typescript
// Generated: src/domains/crm/account.object.ts
export const AccountObject = defineObject({
  name: 'account',
  label: 'Account',
  fields: {
    name: { type: 'text', required: true },
    industry: { type: 'select', options: ['...'] },
    revenue: { type: 'currency' }
  }
});
```

### 3. **UI Generation**
Object schemas â†’ Views, Forms, Dashboards

**Output:**
- Grid view
- Kanban view  
- Form layouts
- Dashboard widgets

### 4. **Test Generation**
Code â†’ Comprehensive test suite

**Output:**
```typescript
// Generated: src/domains/crm/account.test.ts
describe('AccountObject', () => {
  it('should validate schema', () => {
    expect(AccountObject.parse(validData)).toBeDefined();
  });
});
```

### 5. **Deployment**
Code â†’ Production application

**Process:**
1. Git commit to feature branch
2. Create pull request
3. Run CI/CD (tests, validation)
4. Deploy preview to Vercel
5. Merge â†’ Production deployment

## ğŸ—ï¸ Agent Architecture

### Multi-Agent System

```
[Orchestrator] 
    â”œâ”€â”€ [Product Designer] - Requirements â†’ Specs
    â”œâ”€â”€ [Data Architect] - Specs â†’ Object Models
    â”œâ”€â”€ [UI Designer] - Models â†’ UI Definitions
    â”œâ”€â”€ [Code Generator] - Definitions â†’ TypeScript
    â”œâ”€â”€ [Test Engineer] - Code â†’ Tests
    â””â”€â”€ [DevOps] - All â†’ Deployment
```

### Agent Definitions

See the complete agent configurations:
- `src/agents/orchestrator.agent.ts`
- `src/agents/data-architect.agent.ts`
- `src/agents/ui-designer.agent.ts`
- `src/agents/code-generator.agent.ts`
- `src/agents/test-engineer.agent.ts`

## ğŸš€ Quick Start

### Prerequisites

- Node.js 20+
- pnpm
- OpenAI API Key or Anthropic API Key
- GitHub account
- Vercel account (optional, for deployment)

### Installation

```bash
# From monorepo root
pnpm install

# Build dependencies
pnpm --filter @objectstack/spec build

# Build AI Factory
pnpm --filter @objectstack/ai-factory build
```

### Configuration

Create `.env`:
```bash
# AI Model API Keys
OPENAI_API_KEY=sk-...
ANTHROPIC_API_KEY=sk-ant-...

# Vector Database (for RAG)
PINECONE_API_KEY=...
PINECONE_ENVIRONMENT=...

# GitHub (for automated PRs)
GITHUB_TOKEN=ghp_...

# Vercel (for deployment)
VERCEL_TOKEN=...
VERCEL_PROJECT_ID=...
```

### Usage

#### 1. Generate App from CLI

```bash
pnpm --filter @objectstack/ai-factory generate \
  --requirement "Build a project management app with tasks and milestones"
```

#### 2. Generate App Programmatically

```typescript
import { AIFactory } from '@objectstack/ai-factory';

const factory = new AIFactory({
  openaiKey: process.env.OPENAI_API_KEY,
  anthropicKey: process.env.ANTHROPIC_API_KEY,
});

const result = await factory.generateApp({
  requirement: 'Build a project management app with tasks and milestones',
  includeTests: true,
  autoDeploy: true,
});

console.log('Generated files:', result.files);
console.log('Preview URL:', result.deploymentUrl);
```

#### 3. Trigger via GitHub Workflow

Push a file with requirements:
```bash
echo "Build a CRM with accounts and contacts" > requirements.txt
git add requirements.txt
git commit -m "Request: New CRM app"
git push
```

GitHub Action automatically triggers AI Factory.

## ğŸ“ Example Outputs

### Generated Project Structure

```
generated-crm/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ domains/
â”‚   â”‚   â””â”€â”€ crm/
â”‚   â”‚       â”œâ”€â”€ account.object.ts
â”‚   â”‚       â”œâ”€â”€ contact.object.ts
â”‚   â”‚       â””â”€â”€ opportunity.object.ts
â”‚   â””â”€â”€ ui/
â”‚       â”œâ”€â”€ crm-app.ts
â”‚       â””â”€â”€ dashboards/
â”‚           â””â”€â”€ sales-dashboard.ts
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ domains/
â”‚       â””â”€â”€ crm/
â”‚           â”œâ”€â”€ account.test.ts
â”‚           â”œâ”€â”€ contact.test.ts
â”‚           â””â”€â”€ opportunity.test.ts
â””â”€â”€ objectstack.config.ts
```

### Generated Documentation

```markdown
# CRM Application

Auto-generated by AI Factory

## Objects
- Account: Customer companies
- Contact: People at accounts
- Opportunity: Sales pipeline

## Features
- Kanban board for opportunities
- Sales dashboard
- Contact management
```

## ğŸ§ª Testing

```bash
# Run all tests
pnpm test

# Run specific agent tests
pnpm test src/agents/data-architect.test.ts

# Test end-to-end generation
pnpm test:e2e
```

## ğŸ“Š Metrics

The AI Factory tracks:
- **Generation time**: Avg. 3-8 minutes per app
- **Code quality**: >90% valid on first attempt
- **Test coverage**: >85% automatically
- **Deployment success**: >95% first-time deployments

## ğŸ”§ Advanced Configuration

### Custom Agent Instructions

Override default agent behavior:

```typescript
const factory = new AIFactory({
  agents: {
    dataArchitect: {
      instructions: `
        Custom instructions for data modeling...
        Always use master-detail for hierarchical data.
      `,
      model: 'gpt-4-turbo',
      temperature: 0.1,
    }
  }
});
```

### Custom Orchestration

Define your own workflow:

```typescript
export const CustomOrchestration = defineAIOrchestration({
  name: 'custom_generation',
  aiTasks: [
    { /* ... */ },
  ],
  executionMode: 'parallel', // Run tasks in parallel
});
```

## ğŸ“š Documentation

- **[Full Feasibility Study](../../content/agents/autonomous-crm-agent.md)** - Complete architecture and roadmap
- **[Agent Protocol](../../packages/spec/src/ai/agent.zod.ts)** - Agent definition schema
- **[Orchestration Protocol](../../packages/spec/src/ai/orchestration.zod.ts)** - Workflow schema

## ğŸ“ Learning Path

1. **Start here**: Understand the vision and architecture
2. **Read**: [Feasibility Assessment](../../content/agents/autonomous-crm-agent.md)
3. **Explore**: Agent definition files in `src/agents/`
4. **Try**: Run the CLI to generate a simple app
5. **Customize**: Modify agent instructions for your domain
6. **Extend**: Add new agents for specialized tasks

## ğŸ¤ Contributing

This is an experimental prototype. Contributions welcome!

Areas for improvement:
- [ ] More sophisticated requirement parsing
- [ ] Better UI/UX generation
- [ ] Performance optimization
- [ ] Security hardening
- [ ] Multi-language support

## ğŸ“„ License

Apache 2.0 Â© ObjectStack

---

**Status**: ğŸš§ Prototype / Proof of Concept  
**Version**: 0.1.0-alpha
