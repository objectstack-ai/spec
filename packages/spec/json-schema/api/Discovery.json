{
  "$ref": "#/definitions/Discovery",
  "definitions": {
    "Discovery": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "version": {
          "type": "string"
        },
        "environment": {
          "type": "string",
          "enum": [
            "production",
            "sandbox",
            "development"
          ]
        },
        "routes": {
          "type": "object",
          "properties": {
            "data": {
              "type": "string",
              "description": "e.g. /api/v1/data"
            },
            "metadata": {
              "type": "string",
              "description": "e.g. /api/v1/meta"
            },
            "ui": {
              "type": "string",
              "description": "e.g. /api/v1/ui"
            },
            "auth": {
              "type": "string",
              "description": "e.g. /api/v1/auth"
            },
            "automation": {
              "type": "string",
              "description": "e.g. /api/v1/automation"
            },
            "storage": {
              "type": "string",
              "description": "e.g. /api/v1/storage"
            },
            "analytics": {
              "type": "string",
              "description": "e.g. /api/v1/analytics"
            },
            "graphql": {
              "type": "string",
              "description": "e.g. /graphql"
            },
            "packages": {
              "type": "string",
              "description": "e.g. /api/v1/packages"
            },
            "workflow": {
              "type": "string",
              "description": "e.g. /api/v1/workflow"
            },
            "realtime": {
              "type": "string",
              "description": "e.g. /api/v1/realtime"
            },
            "notifications": {
              "type": "string",
              "description": "e.g. /api/v1/notifications"
            },
            "ai": {
              "type": "string",
              "description": "e.g. /api/v1/ai"
            },
            "i18n": {
              "type": "string",
              "description": "e.g. /api/v1/i18n"
            }
          },
          "required": [
            "data",
            "metadata"
          ],
          "additionalProperties": false
        },
        "features": {
          "type": "object",
          "properties": {
            "graphql": {
              "type": "boolean",
              "default": false
            },
            "search": {
              "type": "boolean",
              "default": false
            },
            "websockets": {
              "type": "boolean",
              "default": false
            },
            "files": {
              "type": "boolean",
              "default": true
            },
            "analytics": {
              "type": "boolean",
              "default": false,
              "description": "Is the Analytics/BI engine enabled?"
            },
            "ai": {
              "type": "boolean",
              "default": false,
              "description": "Is the AI engine enabled?"
            },
            "workflow": {
              "type": "boolean",
              "default": false,
              "description": "Is the Workflow engine enabled?"
            },
            "notifications": {
              "type": "boolean",
              "default": false,
              "description": "Is the Notification service enabled?"
            },
            "i18n": {
              "type": "boolean",
              "default": false,
              "description": "Is the i18n service enabled?"
            }
          },
          "additionalProperties": false
        },
        "locale": {
          "type": "object",
          "properties": {
            "default": {
              "type": "string"
            },
            "supported": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "timezone": {
              "type": "string"
            }
          },
          "required": [
            "default",
            "supported",
            "timezone"
          ],
          "additionalProperties": false
        },
        "services": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "properties": {
              "enabled": {
                "type": "boolean"
              },
              "status": {
                "type": "string",
                "enum": [
                  "available",
                  "unavailable",
                  "degraded",
                  "stub"
                ],
                "description": "available = fully operational, unavailable = not installed, degraded = partial, stub = placeholder that throws"
              },
              "route": {
                "type": "string",
                "description": "e.g. /api/v1/analytics"
              },
              "provider": {
                "type": "string",
                "description": "e.g. \"objectql\", \"plugin-redis\", \"driver-memory\""
              },
              "message": {
                "type": "string",
                "description": "e.g. \"Install plugin-workflow to enable\""
              }
            },
            "required": [
              "enabled",
              "status"
            ],
            "additionalProperties": false
          },
          "description": "Per-service availability map keyed by CoreServiceName"
        },
        "metadata": {
          "type": "object",
          "additionalProperties": {},
          "description": "Custom metadata key-value pairs for extensibility"
        }
      },
      "required": [
        "name",
        "version",
        "environment",
        "routes",
        "features",
        "locale"
      ],
      "additionalProperties": false
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}