{
  "$ref": "#/definitions/RestApiRouteRegistration",
  "definitions": {
    "RestApiRouteRegistration": {
      "type": "object",
      "properties": {
        "prefix": {
          "type": "string",
          "pattern": "^\\/",
          "description": "URL path prefix for this route group"
        },
        "service": {
          "type": "string",
          "description": "Core service name (metadata, data, auth, etc.)"
        },
        "category": {
          "type": "string",
          "enum": [
            "discovery",
            "metadata",
            "data",
            "batch",
            "permission",
            "analytics",
            "automation",
            "workflow",
            "ui",
            "realtime",
            "notification",
            "ai",
            "i18n",
            "hub"
          ],
          "description": "Primary category for this route group"
        },
        "methods": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Protocol method names implemented"
        },
        "endpoints": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "method": {
                "type": "string",
                "enum": [
                  "GET",
                  "POST",
                  "PUT",
                  "DELETE",
                  "PATCH",
                  "HEAD",
                  "OPTIONS"
                ],
                "description": "HTTP method for this endpoint"
              },
              "path": {
                "type": "string",
                "description": "URL path pattern (e.g., /api/v1/data/:object/:id)"
              },
              "handler": {
                "type": "string",
                "description": "Protocol method name or handler identifier"
              },
              "category": {
                "type": "string",
                "enum": [
                  "discovery",
                  "metadata",
                  "data",
                  "batch",
                  "permission",
                  "analytics",
                  "automation",
                  "workflow",
                  "ui",
                  "realtime",
                  "notification",
                  "ai",
                  "i18n",
                  "hub"
                ],
                "description": "Route category"
              },
              "public": {
                "type": "boolean",
                "default": false,
                "description": "Is publicly accessible without authentication"
              },
              "permissions": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Required permissions (e.g., [\"data.read\", \"object.account.read\"])"
              },
              "summary": {
                "type": "string",
                "description": "Short description for OpenAPI"
              },
              "description": {
                "type": "string",
                "description": "Detailed description for OpenAPI"
              },
              "tags": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "OpenAPI tags for grouping"
              },
              "requestSchema": {
                "type": "string",
                "description": "Request schema name (for validation)"
              },
              "responseSchema": {
                "type": "string",
                "description": "Response schema name (for documentation)"
              },
              "timeout": {
                "type": "integer",
                "description": "Request timeout in milliseconds"
              },
              "rateLimit": {
                "type": "string",
                "description": "Rate limit policy name"
              },
              "cacheable": {
                "type": "boolean",
                "default": false,
                "description": "Whether response can be cached"
              },
              "cacheTtl": {
                "type": "integer",
                "description": "Cache TTL in seconds"
              }
            },
            "required": [
              "method",
              "path",
              "handler",
              "category"
            ],
            "additionalProperties": false
          },
          "description": "Endpoint definitions"
        },
        "middleware": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "pattern": "^[a-z_][a-z0-9_]*$",
                "description": "Middleware name (snake_case)"
              },
              "type": {
                "type": "string",
                "enum": [
                  "authentication",
                  "authorization",
                  "logging",
                  "validation",
                  "transformation",
                  "error",
                  "custom"
                ],
                "description": "Middleware type"
              },
              "enabled": {
                "type": "boolean",
                "default": true,
                "description": "Whether middleware is enabled"
              },
              "order": {
                "type": "integer",
                "default": 100,
                "description": "Execution order priority"
              },
              "config": {
                "type": "object",
                "additionalProperties": {},
                "description": "Middleware configuration object"
              },
              "paths": {
                "type": "object",
                "properties": {
                  "include": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Include path patterns (glob)"
                  },
                  "exclude": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Exclude path patterns (glob)"
                  }
                },
                "additionalProperties": false,
                "description": "Path filtering"
              }
            },
            "required": [
              "name",
              "type"
            ],
            "additionalProperties": false
          },
          "description": "Middleware stack for this route group"
        },
        "authRequired": {
          "type": "boolean",
          "default": true,
          "description": "Whether authentication is required by default"
        },
        "documentation": {
          "type": "object",
          "properties": {
            "title": {
              "type": "string",
              "description": "Route group title"
            },
            "description": {
              "type": "string",
              "description": "Route group description"
            },
            "tags": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "OpenAPI tags"
            }
          },
          "additionalProperties": false,
          "description": "Documentation metadata for this route group"
        }
      },
      "required": [
        "prefix",
        "service",
        "category"
      ],
      "additionalProperties": false
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}