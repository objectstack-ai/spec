{
  "$ref": "#/definitions/Report",
  "definitions": {
    "Report": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-z_][a-z0-9_]*$",
          "description": "Report unique name"
        },
        "label": {
          "type": "string",
          "description": "Report label"
        },
        "description": {
          "type": "string"
        },
        "objectName": {
          "type": "string",
          "description": "Primary object"
        },
        "type": {
          "type": "string",
          "enum": [
            "tabular",
            "summary",
            "matrix",
            "joined"
          ],
          "default": "tabular",
          "description": "Report format type"
        },
        "columns": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "field": {
                "type": "string",
                "description": "Field name"
              },
              "label": {
                "type": "string",
                "description": "Override label"
              },
              "aggregate": {
                "type": "string",
                "enum": [
                  "sum",
                  "avg",
                  "max",
                  "min",
                  "count",
                  "unique"
                ],
                "description": "Aggregation function"
              }
            },
            "required": [
              "field"
            ],
            "additionalProperties": false
          },
          "description": "Columns to display"
        },
        "groupingsDown": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "field": {
                "type": "string",
                "description": "Field to group by"
              },
              "sortOrder": {
                "type": "string",
                "enum": [
                  "asc",
                  "desc"
                ],
                "default": "asc"
              },
              "dateGranularity": {
                "type": "string",
                "enum": [
                  "day",
                  "week",
                  "month",
                  "quarter",
                  "year"
                ],
                "description": "For date fields"
              }
            },
            "required": [
              "field"
            ],
            "additionalProperties": false
          },
          "description": "Row groupings"
        },
        "groupingsAcross": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "field": {
                "type": "string",
                "description": "Field to group by"
              },
              "sortOrder": {
                "type": "string",
                "enum": [
                  "asc",
                  "desc"
                ],
                "default": "asc"
              },
              "dateGranularity": {
                "type": "string",
                "enum": [
                  "day",
                  "week",
                  "month",
                  "quarter",
                  "year"
                ],
                "description": "For date fields"
              }
            },
            "required": [
              "field"
            ],
            "additionalProperties": false
          },
          "description": "Column groupings (Matrix only)"
        },
        "filter": {
          "allOf": [
            {
              "type": "object",
              "additionalProperties": {}
            },
            {
              "type": "object",
              "properties": {
                "$and": {
                  "type": "array",
                  "items": {}
                },
                "$or": {
                  "type": "array",
                  "items": {}
                },
                "$not": {}
              }
            }
          ],
          "description": "Filter criteria"
        },
        "chart": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "bar",
                "horizontal-bar",
                "column",
                "grouped-bar",
                "stacked-bar",
                "line",
                "area",
                "stacked-area",
                "step-line",
                "pie",
                "donut",
                "funnel",
                "scatter",
                "bubble",
                "treemap",
                "sunburst",
                "sankey",
                "gauge",
                "metric",
                "kpi",
                "choropleth",
                "bubble-map",
                "heatmap",
                "radar",
                "waterfall",
                "box-plot",
                "violin",
                "table",
                "pivot"
              ]
            },
            "title": {
              "type": "string",
              "description": "Chart title"
            },
            "description": {
              "type": "string",
              "description": "Chart description"
            },
            "showLegend": {
              "type": "boolean",
              "default": true,
              "description": "Display legend"
            },
            "showDataLabels": {
              "type": "boolean",
              "default": false,
              "description": "Display data labels on chart"
            },
            "colors": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Custom color palette"
            },
            "xAxis": {
              "type": "string",
              "description": "Grouping field for X-Axis"
            },
            "yAxis": {
              "type": "string",
              "description": "Summary field for Y-Axis"
            },
            "groupBy": {
              "type": "string",
              "description": "Additional grouping field"
            }
          },
          "required": [
            "type",
            "xAxis",
            "yAxis"
          ],
          "additionalProperties": false,
          "description": "Embedded chart configuration"
        }
      },
      "required": [
        "name",
        "label",
        "objectName",
        "columns"
      ],
      "additionalProperties": false
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}