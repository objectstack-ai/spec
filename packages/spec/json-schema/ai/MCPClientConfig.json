{
  "$ref": "#/definitions/MCPClientConfig",
  "definitions": {
    "MCPClientConfig": {
      "type": "object",
      "properties": {
        "servers": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "pattern": "^[a-z_][a-z0-9_]*$",
                "description": "Server unique identifier (snake_case)"
              },
              "label": {
                "type": "string",
                "description": "Display name"
              },
              "description": {
                "type": "string"
              },
              "serverInfo": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Server name"
                  },
                  "version": {
                    "type": "string",
                    "description": "Server version (semver)"
                  },
                  "description": {
                    "type": "string"
                  },
                  "capabilities": {
                    "type": "object",
                    "properties": {
                      "resources": {
                        "type": "boolean",
                        "default": false,
                        "description": "Supports resource listing and retrieval"
                      },
                      "resourceTemplates": {
                        "type": "boolean",
                        "default": false,
                        "description": "Supports dynamic resource templates"
                      },
                      "tools": {
                        "type": "boolean",
                        "default": false,
                        "description": "Supports tool/function calling"
                      },
                      "prompts": {
                        "type": "boolean",
                        "default": false,
                        "description": "Supports prompt templates"
                      },
                      "sampling": {
                        "type": "boolean",
                        "default": false,
                        "description": "Supports sampling from LLMs"
                      },
                      "logging": {
                        "type": "boolean",
                        "default": false,
                        "description": "Supports logging and debugging"
                      }
                    },
                    "additionalProperties": false
                  },
                  "protocolVersion": {
                    "type": "string",
                    "default": "2024-11-05",
                    "description": "MCP protocol version"
                  },
                  "vendor": {
                    "type": "string",
                    "description": "Server vendor/provider"
                  },
                  "homepage": {
                    "type": "string",
                    "format": "uri",
                    "description": "Server homepage URL"
                  },
                  "documentation": {
                    "type": "string",
                    "format": "uri",
                    "description": "Documentation URL"
                  }
                },
                "required": [
                  "name",
                  "version",
                  "capabilities"
                ],
                "additionalProperties": false
              },
              "transport": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "stdio",
                      "http",
                      "websocket",
                      "grpc"
                    ]
                  },
                  "url": {
                    "type": "string",
                    "format": "uri",
                    "description": "Server URL (for HTTP/WebSocket/gRPC)"
                  },
                  "headers": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "string"
                    },
                    "description": "Custom headers for requests"
                  },
                  "auth": {
                    "type": "object",
                    "properties": {
                      "type": {
                        "type": "string",
                        "enum": [
                          "none",
                          "bearer",
                          "api_key",
                          "oauth2",
                          "custom"
                        ],
                        "default": "none"
                      },
                      "token": {
                        "type": "string",
                        "description": "Bearer token or API key"
                      },
                      "secretRef": {
                        "type": "string",
                        "description": "Reference to stored secret"
                      },
                      "headerName": {
                        "type": "string",
                        "description": "Custom auth header name"
                      }
                    },
                    "additionalProperties": false
                  },
                  "timeout": {
                    "type": "integer",
                    "exclusiveMinimum": 0,
                    "default": 30000,
                    "description": "Request timeout in milliseconds"
                  },
                  "retryAttempts": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 5,
                    "default": 3
                  },
                  "retryDelay": {
                    "type": "integer",
                    "exclusiveMinimum": 0,
                    "default": 1000,
                    "description": "Delay between retries in milliseconds"
                  },
                  "command": {
                    "type": "string",
                    "description": "Command to execute (for stdio transport)"
                  },
                  "args": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Command arguments"
                  },
                  "env": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "string"
                    },
                    "description": "Environment variables"
                  },
                  "workingDirectory": {
                    "type": "string",
                    "description": "Working directory for the process"
                  }
                },
                "required": [
                  "type"
                ],
                "additionalProperties": false
              },
              "resources": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "uri": {
                      "type": "string",
                      "description": "Unique resource identifier (e.g., \"objectstack://objects/account/ABC123\")"
                    },
                    "name": {
                      "type": "string",
                      "description": "Human-readable resource name"
                    },
                    "description": {
                      "type": "string",
                      "description": "Resource description for AI consumption"
                    },
                    "mimeType": {
                      "type": "string",
                      "description": "MIME type (e.g., \"application/json\", \"text/plain\")"
                    },
                    "resourceType": {
                      "type": "string",
                      "enum": [
                        "text",
                        "json",
                        "binary",
                        "stream"
                      ],
                      "default": "json"
                    },
                    "content": {
                      "description": "Resource content (for static resources)"
                    },
                    "contentUrl": {
                      "type": "string",
                      "format": "uri",
                      "description": "URL to fetch content dynamically"
                    },
                    "size": {
                      "type": "integer",
                      "minimum": 0,
                      "description": "Resource size in bytes"
                    },
                    "lastModified": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Last modification timestamp (ISO 8601)"
                    },
                    "tags": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "description": "Tags for resource categorization"
                    },
                    "permissions": {
                      "type": "object",
                      "properties": {
                        "read": {
                          "type": "boolean",
                          "default": true
                        },
                        "write": {
                          "type": "boolean",
                          "default": false
                        },
                        "delete": {
                          "type": "boolean",
                          "default": false
                        }
                      },
                      "additionalProperties": false
                    },
                    "cacheable": {
                      "type": "boolean",
                      "default": true,
                      "description": "Whether this resource can be cached"
                    },
                    "cacheMaxAge": {
                      "type": "integer",
                      "minimum": 0,
                      "description": "Cache max age in seconds"
                    }
                  },
                  "required": [
                    "uri",
                    "name"
                  ],
                  "additionalProperties": false
                },
                "description": "Static resources"
              },
              "resourceTemplates": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "uriPattern": {
                      "type": "string",
                      "description": "URI pattern with variables (e.g., \"objectstack://objects/{objectName}/{recordId}\")"
                    },
                    "name": {
                      "type": "string",
                      "description": "Template name"
                    },
                    "description": {
                      "type": "string"
                    },
                    "parameters": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string",
                            "description": "Parameter name"
                          },
                          "type": {
                            "type": "string",
                            "enum": [
                              "string",
                              "number",
                              "boolean"
                            ],
                            "default": "string"
                          },
                          "required": {
                            "type": "boolean",
                            "default": true
                          },
                          "description": {
                            "type": "string"
                          },
                          "pattern": {
                            "type": "string",
                            "description": "Regex validation pattern"
                          },
                          "default": {}
                        },
                        "required": [
                          "name"
                        ],
                        "additionalProperties": false
                      },
                      "description": "URI parameters"
                    },
                    "handler": {
                      "type": "string",
                      "description": "Handler function name for dynamic generation"
                    },
                    "mimeType": {
                      "type": "string"
                    },
                    "resourceType": {
                      "type": "string",
                      "enum": [
                        "text",
                        "json",
                        "binary",
                        "stream"
                      ],
                      "default": "json"
                    }
                  },
                  "required": [
                    "uriPattern",
                    "name",
                    "parameters"
                  ],
                  "additionalProperties": false
                },
                "description": "Dynamic resource templates"
              },
              "tools": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string",
                      "pattern": "^[a-z_][a-z0-9_]*$",
                      "description": "Tool function name (snake_case)"
                    },
                    "description": {
                      "type": "string",
                      "description": "Tool description for AI consumption (be detailed and specific)"
                    },
                    "parameters": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string",
                            "description": "Parameter name"
                          },
                          "type": {
                            "type": "string",
                            "enum": [
                              "string",
                              "number",
                              "boolean",
                              "object",
                              "array"
                            ]
                          },
                          "description": {
                            "type": "string",
                            "description": "Parameter description for AI consumption"
                          },
                          "required": {
                            "type": "boolean",
                            "default": false
                          },
                          "default": {},
                          "enum": {
                            "type": "array",
                            "items": {},
                            "description": "Allowed values"
                          },
                          "pattern": {
                            "type": "string",
                            "description": "Regex validation pattern (for strings)"
                          },
                          "minimum": {
                            "type": "number",
                            "description": "Minimum value (for numbers)"
                          },
                          "maximum": {
                            "type": "number",
                            "description": "Maximum value (for numbers)"
                          },
                          "minLength": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "Minimum length (for strings/arrays)"
                          },
                          "maxLength": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "Maximum length (for strings/arrays)"
                          },
                          "properties": {
                            "type": "object",
                            "additionalProperties": {},
                            "description": "Properties for object types"
                          },
                          "items": {
                            "description": "Item schema for array types"
                          }
                        },
                        "required": [
                          "name",
                          "type",
                          "description"
                        ],
                        "additionalProperties": false
                      },
                      "description": "Tool parameters"
                    },
                    "returns": {
                      "type": "object",
                      "properties": {
                        "type": {
                          "type": "string",
                          "enum": [
                            "string",
                            "number",
                            "boolean",
                            "object",
                            "array",
                            "void"
                          ]
                        },
                        "description": {
                          "type": "string"
                        },
                        "schema": {
                          "type": "object",
                          "properties": {
                            "name": {
                              "type": "string",
                              "description": "Parameter name"
                            },
                            "type": {
                              "type": "string",
                              "enum": [
                                "string",
                                "number",
                                "boolean",
                                "object",
                                "array"
                              ]
                            },
                            "description": {
                              "type": "string",
                              "description": "Parameter description for AI consumption"
                            },
                            "required": {
                              "type": "boolean",
                              "default": false
                            },
                            "default": {},
                            "enum": {
                              "type": "array",
                              "items": {},
                              "description": "Allowed values"
                            },
                            "pattern": {
                              "type": "string",
                              "description": "Regex validation pattern (for strings)"
                            },
                            "minimum": {
                              "type": "number",
                              "description": "Minimum value (for numbers)"
                            },
                            "maximum": {
                              "type": "number",
                              "description": "Maximum value (for numbers)"
                            },
                            "minLength": {
                              "type": "integer",
                              "minimum": 0,
                              "description": "Minimum length (for strings/arrays)"
                            },
                            "maxLength": {
                              "type": "integer",
                              "minimum": 0,
                              "description": "Maximum length (for strings/arrays)"
                            },
                            "properties": {
                              "type": "object",
                              "additionalProperties": {},
                              "description": "Properties for object types"
                            },
                            "items": {
                              "description": "Item schema for array types"
                            }
                          },
                          "required": [
                            "name",
                            "type",
                            "description"
                          ],
                          "additionalProperties": false,
                          "description": "Return value schema"
                        }
                      },
                      "required": [
                        "type"
                      ],
                      "additionalProperties": false
                    },
                    "handler": {
                      "type": "string",
                      "description": "Handler function or endpoint reference"
                    },
                    "async": {
                      "type": "boolean",
                      "default": true,
                      "description": "Whether the tool executes asynchronously"
                    },
                    "timeout": {
                      "type": "integer",
                      "exclusiveMinimum": 0,
                      "description": "Execution timeout in milliseconds"
                    },
                    "sideEffects": {
                      "type": "string",
                      "enum": [
                        "none",
                        "read",
                        "write",
                        "delete"
                      ],
                      "default": "read",
                      "description": "Tool side effects"
                    },
                    "requiresConfirmation": {
                      "type": "boolean",
                      "default": false,
                      "description": "Require user confirmation before execution"
                    },
                    "confirmationMessage": {
                      "type": "string"
                    },
                    "examples": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "description": {
                            "type": "string"
                          },
                          "parameters": {
                            "type": "object",
                            "additionalProperties": {}
                          },
                          "result": {}
                        },
                        "required": [
                          "description",
                          "parameters"
                        ],
                        "additionalProperties": false
                      },
                      "description": "Usage examples for AI learning"
                    },
                    "category": {
                      "type": "string",
                      "description": "Tool category (e.g., \"data\", \"workflow\", \"analytics\")"
                    },
                    "tags": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "deprecated": {
                      "type": "boolean",
                      "default": false
                    },
                    "version": {
                      "type": "string",
                      "default": "1.0.0"
                    }
                  },
                  "required": [
                    "name",
                    "description",
                    "parameters",
                    "handler"
                  ],
                  "additionalProperties": false
                },
                "description": "Available tools"
              },
              "prompts": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string",
                      "pattern": "^[a-z_][a-z0-9_]*$",
                      "description": "Prompt template name (snake_case)"
                    },
                    "description": {
                      "type": "string",
                      "description": "Prompt description"
                    },
                    "messages": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "role": {
                            "type": "string",
                            "enum": [
                              "system",
                              "user",
                              "assistant"
                            ],
                            "description": "Message role"
                          },
                          "content": {
                            "type": "string",
                            "description": "Message content (can include {{variable}} placeholders)"
                          }
                        },
                        "required": [
                          "role",
                          "content"
                        ],
                        "additionalProperties": false
                      },
                      "description": "Prompt message sequence"
                    },
                    "arguments": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string",
                            "description": "Argument name"
                          },
                          "description": {
                            "type": "string"
                          },
                          "type": {
                            "type": "string",
                            "enum": [
                              "string",
                              "number",
                              "boolean"
                            ],
                            "default": "string"
                          },
                          "required": {
                            "type": "boolean",
                            "default": false
                          },
                          "default": {}
                        },
                        "required": [
                          "name"
                        ],
                        "additionalProperties": false
                      },
                      "description": "Dynamic arguments for the prompt"
                    },
                    "category": {
                      "type": "string"
                    },
                    "tags": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "version": {
                      "type": "string",
                      "default": "1.0.0"
                    }
                  },
                  "required": [
                    "name",
                    "messages"
                  ],
                  "additionalProperties": false
                },
                "description": "Prompt templates"
              },
              "autoStart": {
                "type": "boolean",
                "default": false,
                "description": "Auto-start server on system boot"
              },
              "restartOnFailure": {
                "type": "boolean",
                "default": true,
                "description": "Auto-restart on failure"
              },
              "healthCheck": {
                "type": "object",
                "properties": {
                  "enabled": {
                    "type": "boolean",
                    "default": true
                  },
                  "interval": {
                    "type": "integer",
                    "exclusiveMinimum": 0,
                    "default": 60000,
                    "description": "Health check interval in milliseconds"
                  },
                  "timeout": {
                    "type": "integer",
                    "exclusiveMinimum": 0,
                    "default": 5000,
                    "description": "Health check timeout in milliseconds"
                  },
                  "endpoint": {
                    "type": "string",
                    "description": "Health check endpoint (for HTTP servers)"
                  }
                },
                "additionalProperties": false
              },
              "permissions": {
                "type": "object",
                "properties": {
                  "allowedAgents": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Agent names allowed to use this server"
                  },
                  "allowedUsers": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "User IDs allowed to use this server"
                  },
                  "requireAuth": {
                    "type": "boolean",
                    "default": true
                  }
                },
                "additionalProperties": false
              },
              "rateLimit": {
                "type": "object",
                "properties": {
                  "enabled": {
                    "type": "boolean",
                    "default": false
                  },
                  "requestsPerMinute": {
                    "type": "integer",
                    "exclusiveMinimum": 0
                  },
                  "requestsPerHour": {
                    "type": "integer",
                    "exclusiveMinimum": 0
                  },
                  "burstSize": {
                    "type": "integer",
                    "exclusiveMinimum": 0
                  }
                },
                "additionalProperties": false
              },
              "tags": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "status": {
                "type": "string",
                "enum": [
                  "active",
                  "inactive",
                  "maintenance",
                  "deprecated"
                ],
                "default": "active"
              },
              "version": {
                "type": "string",
                "default": "1.0.0"
              },
              "createdAt": {
                "type": "string",
                "format": "date-time"
              },
              "updatedAt": {
                "type": "string",
                "format": "date-time"
              }
            },
            "required": [
              "name",
              "label",
              "serverInfo",
              "transport"
            ],
            "additionalProperties": false
          },
          "description": "MCP servers to connect to"
        },
        "defaultTimeout": {
          "type": "integer",
          "exclusiveMinimum": 0,
          "default": 30000,
          "description": "Default timeout for requests"
        },
        "enableCaching": {
          "type": "boolean",
          "default": true,
          "description": "Enable client-side caching"
        },
        "cacheMaxAge": {
          "type": "integer",
          "minimum": 0,
          "default": 300,
          "description": "Cache max age in seconds"
        },
        "retryAttempts": {
          "type": "integer",
          "minimum": 0,
          "maximum": 5,
          "default": 3
        },
        "retryDelay": {
          "type": "integer",
          "exclusiveMinimum": 0,
          "default": 1000
        },
        "enableLogging": {
          "type": "boolean",
          "default": true
        },
        "logLevel": {
          "type": "string",
          "enum": [
            "debug",
            "info",
            "warn",
            "error"
          ],
          "default": "info"
        }
      },
      "required": [
        "servers"
      ],
      "additionalProperties": false
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}