{
  "$ref": "#/definitions/Datasource",
  "definitions": {
    "Datasource": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-z_][a-z0-9_]*$",
          "description": "Unique datasource identifier"
        },
        "label": {
          "type": "string",
          "description": "Display label"
        },
        "driver": {
          "type": "string",
          "description": "Underlying driver type"
        },
        "config": {
          "type": "object",
          "additionalProperties": {},
          "description": "Driver specific configuration"
        },
        "pool": {
          "type": "object",
          "properties": {
            "min": {
              "type": "number",
              "default": 0,
              "description": "Minimum connections"
            },
            "max": {
              "type": "number",
              "default": 10,
              "description": "Maximum connections"
            },
            "idleTimeoutMillis": {
              "type": "number",
              "default": 30000,
              "description": "Idle timeout"
            },
            "connectionTimeoutMillis": {
              "type": "number",
              "default": 3000,
              "description": "Connection establishment timeout"
            }
          },
          "additionalProperties": false,
          "description": "Connection pool settings"
        },
        "readReplicas": {
          "type": "array",
          "items": {
            "type": "object",
            "additionalProperties": {}
          },
          "description": "Read-only replica configurations"
        },
        "capabilities": {
          "type": "object",
          "properties": {
            "transactions": {
              "type": "boolean",
              "default": false
            },
            "queryFilters": {
              "type": "boolean",
              "default": false
            },
            "queryAggregations": {
              "type": "boolean",
              "default": false
            },
            "querySorting": {
              "type": "boolean",
              "default": false
            },
            "queryPagination": {
              "type": "boolean",
              "default": false
            },
            "queryWindowFunctions": {
              "type": "boolean",
              "default": false
            },
            "querySubqueries": {
              "type": "boolean",
              "default": false
            },
            "joins": {
              "type": "boolean",
              "default": false
            },
            "fullTextSearch": {
              "type": "boolean",
              "default": false
            },
            "readOnly": {
              "type": "boolean",
              "default": false
            },
            "dynamicSchema": {
              "type": "boolean",
              "default": false
            }
          },
          "additionalProperties": false,
          "description": "Capability overrides"
        },
        "healthCheck": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Enable health check endpoint"
            },
            "intervalMs": {
              "type": "number",
              "default": 30000,
              "description": "Health check interval in milliseconds"
            },
            "timeoutMs": {
              "type": "number",
              "default": 5000,
              "description": "Health check timeout in milliseconds"
            }
          },
          "additionalProperties": false,
          "description": "Datasource health check configuration"
        },
        "retryPolicy": {
          "type": "object",
          "properties": {
            "maxRetries": {
              "type": "number",
              "default": 3,
              "description": "Maximum number of retry attempts"
            },
            "baseDelayMs": {
              "type": "number",
              "default": 1000,
              "description": "Base delay between retries in milliseconds"
            },
            "maxDelayMs": {
              "type": "number",
              "default": 30000,
              "description": "Maximum delay between retries in milliseconds"
            },
            "backoffMultiplier": {
              "type": "number",
              "default": 2,
              "description": "Exponential backoff multiplier"
            }
          },
          "additionalProperties": false,
          "description": "Connection retry policy for transient failures"
        },
        "description": {
          "type": "string",
          "description": "Internal description"
        },
        "active": {
          "type": "boolean",
          "default": true,
          "description": "Is datasource enabled"
        }
      },
      "required": [
        "name",
        "driver",
        "config"
      ],
      "additionalProperties": false
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}