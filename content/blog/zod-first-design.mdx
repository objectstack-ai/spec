---
title: Understanding Zod-First Protocol Design
description: Learn why ObjectStack chose Zod as the foundation for protocol definitions and how it benefits your development workflow.
author: ObjectStack Team
date: 2024-01-18
tags: [zod, typescript, protocol, technical]
---

# Understanding Zod-First Protocol Design

One of the core principles of ObjectStack is **Zod-First** design. But what does that mean, and why is it important?

## What is Zod?

[Zod](https://zod.dev/) is a TypeScript-first schema declaration and validation library. It allows you to:

- Define schemas with full TypeScript type inference
- Validate data at runtime
- Generate JSON Schema for documentation
- Create parsers and transformers

## Why Zod-First?

ObjectStack Protocol uses Zod as the single source of truth for all definitions. This approach provides several key benefits:

### 1. Runtime Validation

```typescript
import { ObjectProtocol } from '@objectstack/spec';

export const User = ObjectProtocol.define({
  name: 'user',
  fields: {
    email: Field.text({ required: true }),
    age: Field.number({ min: 0, max: 150 }),
  }
});

// Runtime validation happens automatically
```

### 2. Static Type Inference

Because everything is defined in Zod, TypeScript can infer types directly from your schemas:

```typescript
type UserType = z.infer<typeof User>;
// No need to maintain separate type definitions!
```

### 3. JSON Schema Generation

Zod schemas can be automatically converted to JSON Schema, making them:
- **Documentable**: Auto-generate API documentation
- **Interoperable**: Work with any language/tool that supports JSON Schema
- **AI-Friendly**: LLMs can understand and work with JSON Schema

### 4. Single Source of Truth

With Zod-First design, you define your protocol once and get:
- Runtime validation ✅
- TypeScript types ✅
- JSON Schema ✅
- IDE autocomplete ✅
- Error messages ✅

## Real-World Example

Here's how a complete Object definition looks:

```typescript
import { z } from 'zod';
import { ObjectProtocol, Field } from '@objectstack/spec';

export const ProjectTaskSchema = ObjectProtocol.define({
  name: 'project_task',
  label: 'Project Task',
  fields: {
    title: Field.text({ 
      required: true,
      maxLength: 255 
    }),
    status: Field.select({
      options: ['todo', 'in_progress', 'done'],
      default: 'todo'
    }),
    assignee: Field.lookup({
      reference: 'user',
      multiple: false
    }),
    due_date: Field.date({ required: false }),
    priority: Field.number({ 
      min: 1, 
      max: 5,
      default: 3 
    }),
  },
  enable: {
    trackHistory: true,
    apiEnabled: true,
  }
});

// TypeScript type is automatically inferred
type ProjectTask = z.infer<typeof ProjectTaskSchema>;
```

## Benefits for AI Development

Zod-First design makes ObjectStack incredibly **AI-friendly**:

1. **Deterministic Schema**: LLMs can reliably generate valid ObjectStack definitions
2. **JSON Schema Output**: AI agents can understand the structure through standardized JSON Schema
3. **Validation Feedback**: Runtime validation provides clear error messages for AI to learn from

## Conclusion

Zod-First protocol design is not just a technical choice—it's a philosophy that prioritizes:
- **Developer Experience**: Write once, use everywhere
- **Type Safety**: Catch errors at compile time and runtime
- **Interoperability**: Work with any tool that understands JSON Schema
- **AI Integration**: Enable seamless AI-powered development

Ready to dive deeper? Check out our [Schema Definition Guide](/docs/specifications/data/schema-definition) for more details.

---

*Questions? Join the discussion on [GitHub](https://github.com/objectstack-ai/spec/discussions).*
