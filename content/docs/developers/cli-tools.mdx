---
title: CLI Tools
description: Master the objectstack-cli for project scaffolding, code generation, validation, and deployment.
---

# CLI Tools

The **objectstack-cli** is your command-line companion for building, managing, and deploying ObjectStack applications. It provides code generators, validators, migration tools, and deployment utilities.

Think of it as the **"rails" or "create-react-app"** for ObjectStack - automating repetitive tasks and enforcing best practices.

---

## üéØ What Can CLI Do?

<Cards>
  <Card icon="folder-plus" title="Project Scaffolding">
    Initialize new projects with best-practice structure
  </Card>
  
  <Card icon="code" title="Code Generation">
    Generate objects, fields, views, and plugins from templates
  </Card>
  
  <Card icon="check-circle" title="Validation">
    Lint and validate metadata schemas
  </Card>
  
  <Card icon="rocket" title="Deployment">
    Build, package, and deploy to ObjectStack Cloud or self-hosted
  </Card>
  
  <Card icon="database" title="Migrations">
    Generate and run database migrations
  </Card>
  
  <Card icon="terminal" title="REPL">
    Interactive shell for querying and testing
  </Card>
</Cards>

---

## üìã Prerequisites

- **Node.js** 18+ and **npm** 9+
- Basic command-line knowledge
- ObjectStack project (or create one with CLI)

---

## üöÄ Installation

### Global Installation (Recommended)

```bash
npm install -g @objectstack/cli

# Verify installation
objectstack --version
# or shorthand
os --version
```

### Project-Specific Installation

```bash
npm install --save-dev @objectstack/cli

# Use via npx
npx objectstack --version
```

---

## üèóÔ∏è Project Initialization

### Create a New Project

```bash
# General syntax
objectstack create <type> <name>

# Create a new example application (Todo list)
objectstack create example my-todo-app

# Create a new plugin
objectstack create plugin my-plugin
```

**Available Types:**

- `example` - A functional example application
- `plugin` - Reusable plugin structure

**Project Structure:**

```
my-todo-app/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ domains/           # Domain logic (Objects)
‚îÇ   ‚îî‚îÄ‚îÄ index.ts           # Entry point
‚îú‚îÄ‚îÄ objectstack.config.ts  # Project configuration
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ tsconfig.json
```

---

## üîß Configuration

### objectstack.config.ts

ObjectStack uses a **Zero-Config** approach for development. You only need to define your Objects and Apps. The runtime, database, and server are auto-configured for you.

```typescript
import { defineStack } from '@objectstack/spec';
import { Task } from './src/objects/task';

export default defineStack({
  // Metadata
  manifest: {
    name: 'my_app',
    version: '1.0.0',
    description: 'My ObjectStack Application',
  },
  
  // Data Layer (ObjectQL)
  objects: [
    Task
  ],
  
  // UI Layer (Apps & Visualizations)
  apps: [
    // Define your apps here
  ]
});
```

When you run `objectstack dev`, the CLI automatically:
1.  **Injects ObjectQL Engine** if objects are detected.
2.  **Injects Memory Driver** if no other driver is configured (Development Mode).
3.  **Injects Http Server** to serve the API.

---

## üíª Development Commands

### Start Development Server

```bash
# Start the dev server with hot reload
objectstack dev

# Watch specific package in a monorepo
objectstack dev @my/app
```

### Check Environment Health

```bash
# Verify Node.js, pnpm, and dependencies
objectstack doctor
```

---

## üìù Code Generation

### Generate Object

```bash
# Interactive mode
objectstack generate object

# With options
objectstack generate object Contact \
  --fields="first_name:text,last_name:text,email:email" \
  --relationships="account:lookup" \
  --icon="user"

# Shorthand
os g object Contact
```

**Generated File:**

```typescript
// src/objects/contact.object.ts
import { ObjectSchema, Field } from '@objectstack/spec';

export const Contact = ObjectSchema.create({
  name: 'contact',
  label: 'Contact',
  pluralLabel: 'Contacts',
  icon: 'user',
  
  fields: {
    first_name: Field.text({ label: 'First Name', required: true }),
    last_name: Field.text({ label: 'Last Name', required: true }),
    email: Field.email({ label: 'Email' }),
    account: Field.lookup('account', { label: 'Account' }),
  },
  
  enable: {
    apiEnabled: true,
    trackHistory: true,
  },
});
```

### Generate Field

```bash
# Add a field to existing object
objectstack generate field Contact.phone \
  --type=phone \
  --label="Phone Number" \
  --required

# Multiple fields at once
objectstack generate field Contact \
  --fields="mobile:phone,fax:phone,birthday:date"
```

### Generate View

```bash
# List view
objectstack generate view Contact.list \
  --type=grid \
  --columns="first_name,last_name,email,account"

# Form view
objectstack generate view Contact.form \
  --type=simple \
  --sections="basic:first_name,last_name|contact:email,phone"

# Kanban view
objectstack generate view Task.kanban \
  --type=kanban \
  --groupBy=status
```

### Generate Plugin

```bash
# Create new plugin
objectstack generate plugin my-integration \
  --with-routes \
  --with-jobs \
  --with-events

cd plugins/my-integration
npm install
```

### Generate Widget

```bash
# Create custom widget
objectstack generate widget rich-editor \
  --framework=react \
  --type=field

cd widgets/rich-editor
npm install
```

### Generate Flow

```bash
# Create automation flow
objectstack generate flow send-welcome-email \
  --type=autolaunched \
  --trigger="contact.created"
```

---

## ‚úÖ Validation & Linting

### Validate Schemas

```bash
# Validate all schemas
objectstack validate

# Validate specific files
objectstack validate src/objects/contact.object.ts

# Validate with strict mode
objectstack validate --strict

# Output JSON report
objectstack validate --format=json > report.json
```

**Example Output:**

```
‚úì src/objects/account.object.ts
‚úì src/objects/contact.object.ts
‚úó src/objects/task.object.ts
  √ó Field "due_date" has invalid type
  √ó Missing required field "nameField"

2 files valid, 1 file with errors
```

### Lint Code

```bash
# Run ESLint with ObjectStack rules
objectstack lint

# Fix auto-fixable issues
objectstack lint --fix

# Check specific files
objectstack lint src/objects/**/*.ts
```

### Type Check

```bash
# Run TypeScript compiler
objectstack typecheck

# Watch mode
objectstack typecheck --watch
```

---

## üîç Interactive REPL

Launch an interactive shell for testing and debugging:

```bash
objectstack repl

# Or with specific environment
objectstack repl --env=production
```

**REPL Commands:**

```javascript
// Query objects
> await ql.object('contact').find({ status: 'active' })

// Create records
> await ql.object('contact').create({
    first_name: 'John',
    last_name: 'Doe',
    email: 'john@example.com'
  })

// Update records
> await ql.object('contact').update('contact-123', {
    status: 'inactive'
  })

// Test formulas
> await ql.evaluate('CONCAT(first_name, " ", last_name)', {
    first_name: 'John',
    last_name: 'Doe'
  })

// Inspect schema
> await os.getObjectSchema('contact')

// List objects
> await os.listObjects()

// Exit
> .exit
```

---

## üóÑÔ∏è Database Migrations

### Generate Migration

```bash
# Auto-generate from schema changes
objectstack migrate:generate

# Named migration
objectstack migrate:generate add-phone-to-contact

# With custom SQL
objectstack migrate:generate --sql
```

**Generated Migration:**

```typescript
// migrations/20240126_add_phone_to_contact.ts
import { Migration } from '@objectstack/cli';

export const up: Migration = async (db) => {
  await db.schema.alterTable('contact', (table) => {
    table.string('phone');
  });
};

export const down: Migration = async (db) => {
  await db.schema.alterTable('contact', (table) => {
    table.dropColumn('phone');
  });
};
```

### Run Migrations

```bash
# Run pending migrations
objectstack migrate

# Rollback last migration
objectstack migrate:rollback

# Rollback all
objectstack migrate:rollback --all

# Show migration status
objectstack migrate:status
```

### Seed Data

```bash
# Run seeders
objectstack db:seed

# Specific seeder
objectstack db:seed --file=contacts.seed.ts

# Reset database and seed
objectstack db:reset --seed
```

**Seeder Example:**

```typescript
// seeds/contacts.seed.ts
import { Seeder } from '@objectstack/cli';

export const seed: Seeder = async (ql) => {
  await ql.object('contact').bulkCreate([
    { first_name: 'Alice', last_name: 'Smith', email: 'alice@example.com' },
    { first_name: 'Bob', last_name: 'Jones', email: 'bob@example.com' },
  ]);
};
```

---

## üèÉ Development Server

### Start Dev Server

```bash
# Start with hot reload
objectstack dev

# Custom port
objectstack dev --port=4000

# Open browser
objectstack dev --open

# With specific config
objectstack dev --config=objectstack.dev.ts
```

**Console Output:**

```
ObjectStack Dev Server

  ‚ûú  Local:   http://localhost:3000
  ‚ûú  Network: http://192.168.1.10:3000

  ‚úì Ready in 1.2s
  
  Objects: 12 loaded
  Plugins: 3 enabled
  Views: 8 registered
```

### Build for Production

```bash
# Build project
objectstack build

# Build with specific environment
objectstack build --env=production

# Build and analyze bundle
objectstack build --analyze

# Output directory
objectstack build --outDir=./dist
```

---

## üìä Analyze & Inspect

### Inspect Schema

```bash
# Show all objects
objectstack inspect objects

# Show specific object
objectstack inspect object Contact

# Show fields
objectstack inspect fields Contact

# Show relationships
objectstack inspect relationships Contact

# Output as JSON
objectstack inspect object Contact --format=json
```

**Example Output:**

```
Object: Contact

Name: contact
Label: Contact
Plural: Contacts
Icon: user

Fields:
  - first_name (text) *required
  - last_name (text) *required
  - email (email) *unique
  - phone (phone)
  - account (lookup ‚Üí account)

Relationships:
  ‚Üê tasks (Task.contact)
  ‚Üê opportunities (Opportunity.contact)

Capabilities:
  ‚úì API Enabled
  ‚úì Track History
  ‚úì Search Enabled
```

### Dependency Graph

```bash
# Show plugin dependencies
objectstack graph plugins

# Show object relationships
objectstack graph objects

# Export as DOT file
objectstack graph objects --format=dot > graph.dot
```

---

## üöÄ Deployment

### Deploy to ObjectStack Cloud

```bash
# Login
objectstack login

# Deploy
objectstack deploy

# Deploy to specific environment
objectstack deploy --env=production

# Deploy with custom name
objectstack deploy --name=my-app-v2

# Dry run
objectstack deploy --dry-run
```

**Deployment Process:**

```
‚úì Validating schemas...
‚úì Building project...
‚úì Running tests...
‚úì Uploading assets...
‚úì Creating deployment...
‚úì Running migrations...
‚úì Starting services...

Deployed to: https://my-app.objectstack.app
```

### Deploy to Self-Hosted

```bash
# Generate Docker image
objectstack docker:build

# Run locally
objectstack docker:run

# Generate docker-compose.yml
objectstack docker:compose

# Deploy to Kubernetes
objectstack k8s:deploy
```

**Generated docker-compose.yml:**

```yaml
version: '3.8'
services:
  app:
    image: my-app:latest
    ports:
      - "3000:3000"
    environment:
      - DB_HOST=postgres
      - DB_NAME=myapp
    depends_on:
      - postgres
      - redis
  
  postgres:
    image: postgres:15
    environment:
      POSTGRES_DB: myapp
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: ${DB_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
  
  redis:
    image: redis:7
    volumes:
      - redis_data:/data

volumes:
  postgres_data:
  redis_data:
```

---

## üß™ Testing

### Run Tests

```bash
# Run all tests
objectstack test

# Watch mode
objectstack test --watch

# Coverage report
objectstack test --coverage

# Specific test file
objectstack test tests/contact.test.ts

# E2E tests
objectstack test:e2e
```

### Generate Tests

```bash
# Generate test for object
objectstack generate test Contact

# Generate integration test
objectstack generate test Contact --type=integration
```

**Generated Test:**

```typescript
// tests/contact.test.ts
import { describe, it, expect } from 'vitest';
import { createTestContext } from '@objectstack/testing';

describe('Contact Object', () => {
  it('should create contact', async () => {
    const ctx = await createTestContext();
    
    const contact = await ctx.ql.object('contact').create({
      first_name: 'John',
      last_name: 'Doe',
      email: 'john@example.com',
    });
    
    expect(contact.id).toBeDefined();
    expect(contact.first_name).toBe('John');
  });
});
```

---

## üîå Plugin Management

### Install Plugin

```bash
# Install from npm
objectstack plugin:install @objectstack/plugin-auth

# Install from local path
objectstack plugin:install ./plugins/my-plugin

# Install and enable
objectstack plugin:install @objectstack/plugin-auth --enable
```

### List Plugins

```bash
# Show all plugins
objectstack plugin:list

# Show enabled plugins
objectstack plugin:list --enabled

# Show plugin details
objectstack plugin:info @objectstack/plugin-auth
```

### Enable/Disable Plugin

```bash
# Enable plugin
objectstack plugin:enable @objectstack/plugin-auth

# Disable plugin
objectstack plugin:disable @objectstack/plugin-auth
```

---

## üåç Environment Management

### List Environments

```bash
objectstack env:list
```

### Switch Environment

```bash
objectstack env:use production
```

### Create Environment

```bash
objectstack env:create staging \
  --db-host=staging-db.example.com \
  --db-name=myapp_staging
```

---

## üì¶ Package Management

### Create Package

```bash
# Create distributable package
objectstack package

# With specific version
objectstack package --version=1.2.0

# Include dependencies
objectstack package --include-deps
```

### Publish Package

```bash
# Publish to npm
objectstack publish

# Publish to ObjectStack Hub
objectstack publish --registry=hub.objectstack.dev

# Publish with tag
objectstack publish --tag=beta
```

---

## ‚öôÔ∏è Advanced Commands

### Export Schema

```bash
# Export to JSON
objectstack export --format=json > schema.json

# Export to YAML
objectstack export --format=yaml > schema.yaml

# Export specific objects
objectstack export --objects=Contact,Account
```

### Import Schema

```bash
# Import from file
objectstack import schema.json

# Import with merge
objectstack import schema.json --merge

# Dry run
objectstack import schema.json --dry-run
```

### Sync from Database

```bash
# Generate objects from existing database
objectstack sync:from-db

# Specific tables
objectstack sync:from-db --tables=users,orders

# Preview changes
objectstack sync:from-db --preview
```

---

## üõ†Ô∏è Custom Scripts

Add custom scripts to `objectstack.config.ts`:

```typescript
export default defineConfig({
  scripts: {
    'seed:prod': 'objectstack db:seed --env=production',
    'deploy:staging': 'objectstack deploy --env=staging',
    'backup': 'pg_dump $DB_NAME > backup.sql',
  },
});
```

Run custom scripts:

```bash
objectstack run seed:prod
objectstack run deploy:staging
objectstack run backup
```

---

## üìö CLI Reference

### Global Options

```bash
--version        Show version
--help           Show help
--config <path>  Use specific config file
--env <name>     Use specific environment
--verbose        Show detailed logs
--quiet          Suppress output
--no-color       Disable colors
```

### Command Categories

| Category | Commands | Description |
|----------|----------|-------------|
| **Project** | `init`, `build`, `dev` | Project management |
| **Generate** | `generate object`, `generate field`, etc. | Code generation |
| **Database** | `migrate`, `db:seed`, `db:reset` | Database operations |
| **Validation** | `validate`, `lint`, `typecheck` | Quality checks |
| **Deploy** | `deploy`, `docker:build`, `k8s:deploy` | Deployment |
| **Plugin** | `plugin:install`, `plugin:list` | Plugin management |
| **Inspect** | `inspect objects`, `inspect object` | Schema inspection |

---

## ‚úÖ Best Practices

### 1. Use Environment Variables

```bash
# .env.local
DB_HOST=localhost
DB_PORT=5432
DB_NAME=myapp_dev
DB_USER=postgres
DB_PASSWORD=secret
```

```typescript
// objectstack.config.ts
export default defineConfig({
  datasources: {
    default: {
      host: process.env.DB_HOST,
      port: parseInt(process.env.DB_PORT!),
      database: process.env.DB_NAME,
      user: process.env.DB_USER,
      password: process.env.DB_PASSWORD,
    },
  },
});
```

### 2. Version Control Migrations

```bash
# Always commit migrations
git add migrations/
git commit -m "Add phone field to contact"
```

### 3. Validate Before Deploying

```bash
# Pre-deployment checklist
objectstack validate --strict
objectstack test
objectstack build
objectstack deploy --dry-run
objectstack deploy
```

### 4. Use TypeScript Strict Mode

```json
{
  "compilerOptions": {
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true
  }
}
```

### 5. Automate with Scripts

```json
{
  "scripts": {
    "dev": "objectstack dev",
    "build": "objectstack build",
    "test": "objectstack test",
    "validate": "objectstack validate && objectstack lint",
    "deploy": "npm run validate && npm test && objectstack deploy"
  }
}
```

---

## üîó Related Resources

- [Project Structure Guide](/docs/guides/project-structure)
- [Plugin Development](/docs/development/writing-plugins)
- [Deployment Guide](/docs/transport)

---

## üÜò Troubleshooting

### Command Not Found

```bash
# Ensure CLI is installed globally
npm install -g @objectstack/cli

# Or use npx
npx @objectstack/cli --version
```

### Validation Errors

```bash
# Get detailed error messages
objectstack validate --verbose

# Show line numbers
objectstack validate --show-line-numbers
```

### Migration Failures

```bash
# Rollback and retry
objectstack migrate:rollback
objectstack migrate

# Force migration (use with caution)
objectstack migrate --force
```

### Build Errors

```bash
# Clean build cache
objectstack clean

# Rebuild
objectstack build
```

---

Ready to master the CLI? Start with `objectstack init` and explore the commands! üöÄ
