---
title: AI Quick Reference
description: Quick lookup guide for AI agents developing ObjectStack applications
---

# AI Quick Reference

Quick lookup guide for AI agents developing ObjectStack applications.

## Decision Tree

```
User Requirement
    │
    ├─ Need to store data? → Create *.object.ts
    ├─ Need to display list? → Add views in object
    ├─ Need custom action? → Create *.action.ts
    ├─ Need data validation? → Add validations in object
    ├─ Need automated process? → Add workflows in object
    ├─ Need data analysis? → Create *.dashboard.ts or *.report.ts
    ├─ Need AI functionality? → Create *.agent.ts
    └─ Need custom page? → Create *.page.ts
```

## File Creation Quick Lookup

| User Requirement | Create File | Example Filename |
|-----------------|-------------|------------------|
| Customer management | `*.object.ts` | `customer.object.ts` |
| Product list display | Configure views in object | (within object file) |
| "Export" button | `*.action.ts` | `export_data.action.ts` |
| Sales dashboard | `*.dashboard.ts` | `sales_dashboard.dashboard.ts` |
| Monthly sales report | `*.report.ts` | `monthly_sales.report.ts` |
| Approval flow | `*.flow.ts` | `approval_flow.flow.ts` |
| Support AI assistant | `*.agent.ts` | `support_agent.agent.ts` |
| Auto-send email | Add workflows in object | (within object file) |
| Permission control | Add permissions in object | (within object file) |

## Object Definition Templates

### Basic Object Template

```typescript
import { defineObject } from '@objectstack/spec/data';
import type { ObjectDefinition } from '@objectstack/spec/data';

export const MyObject: ObjectDefinition = defineObject({
  name: 'my_object',           // snake_case
  label: 'My Object',
  labelPlural: 'My Objects',
  description: 'Description of this object',
  
  fields: {
    name: {
      type: 'text',
      label: 'Name',
      required: true,
      maxLength: 255
    },
    // ... more fields
  },
  
  enable: {
    trackHistory: true,
    apiEnabled: true,
    searchEnabled: true
  }
});
```

### Object with Relationships

```typescript
export const Contact: ObjectDefinition = defineObject({
  name: 'contact',
  label: 'Contact',
  
  fields: {
    firstName: { type: 'text', required: true },
    lastName: { type: 'text', required: true },
    
    // Lookup relationship (many-to-one)
    account: {
      type: 'lookup',
      reference: 'account',
      relationshipName: 'contacts',  // account.contacts
      required: true
    },
    
    // Formula field
    fullName: {
      type: 'formula',
      returnType: 'text',
      formula: 'firstName + " " + lastName'
    }
  },
  
  // List views
  views: [
    {
      type: 'list',
      name: 'all_contacts',
      viewType: 'grid',
      label: 'All Contacts',
      columns: ['fullName', 'account', 'email', 'phone'],
      defaultSort: { field: 'lastName', direction: 'asc' }
    }
  ]
});
```

### Object with Validation and Workflow

```typescript
export const Opportunity: ObjectDefinition = defineObject({
  name: 'opportunity',
  label: 'Opportunity',
  
  fields: {
    name: { type: 'text', required: true },
    amount: { type: 'currency', required: true },
    stage: {
      type: 'select',
      options: [
        { value: 'prospecting', label: 'Prospecting' },
        { value: 'qualification', label: 'Qualification' },
        { value: 'proposal', label: 'Proposal' },
        { value: 'closed_won', label: 'Closed Won' },
        { value: 'closed_lost', label: 'Closed Lost' }
      ],
      defaultValue: 'prospecting'
    }
  },
  
  // Validation rules
  validations: [
    {
      type: 'script',
      name: 'amount_positive',
      errorMessage: 'Amount must be greater than 0',
      formula: 'amount > 0'
    }
  ],
  
  // Workflow automation
  workflows: [
    {
      type: 'field_update',
      name: 'auto_set_win_date',
      trigger: {
        on: 'update',
        when: 'stage == "closed_won"'
      },
      actions: [
        {
          type: 'update_field',
          field: 'actualCloseDate',
          value: '$Today'
        }
      ]
    }
  ]
});
```

## Field Types Quick Reference

### Common Field Configurations

```typescript
// Text field
name: {
  type: 'text',
  label: 'Name',
  required: true,
  maxLength: 255,
  unique: true
}

// Email field
email: {
  type: 'email',
  label: 'Email',
  required: true,
  unique: true
}

// Number field
quantity: {
  type: 'number',
  label: 'Quantity',
  min: 0,
  max: 9999,
  precision: 0  // integer
}

// Currency field
price: {
  type: 'currency',
  label: 'Price',
  required: true,
  min: 0,
  precision: 2
}

// Date field
dueDate: {
  type: 'date',
  label: 'Due Date',
  required: true
}

// Boolean field
isActive: {
  type: 'boolean',
  label: 'Active',
  defaultValue: true
}

// Select field
status: {
  type: 'select',
  label: 'Status',
  options: [
    { value: 'draft', label: 'Draft', color: 'gray' },
    { value: 'active', label: 'Active', color: 'green' }
  ],
  defaultValue: 'draft'
}

// Lookup relationship field
account: {
  type: 'lookup',
  label: 'Account',
  reference: 'account',
  relationshipName: 'contacts',
  required: true
}

// Formula field
totalAmount: {
  type: 'formula',
  label: 'Total Amount',
  returnType: 'currency',
  formula: 'quantity * price * (1 - discount / 100)'
}

// Auto-number field
accountNumber: {
  type: 'autonumber',
  label: 'Account Number',
  format: 'ACC-{0000}',
  startingNumber: 1
}
```

## Validation Rule Templates

```typescript
validations: [
  // Script validation
  {
    type: 'script',
    name: 'amount_positive',
    errorMessage: 'Amount must be greater than 0',
    formula: 'amount > 0',
    errorField: 'amount'
  },
  
  // Uniqueness validation
  {
    type: 'uniqueness',
    fields: ['email'],
    errorMessage: 'Email must be unique',
    scope: 'global'
  },
  
  // Date range validation
  {
    type: 'script',
    name: 'end_after_start',
    errorMessage: 'End date must be after start date',
    formula: 'endDate > startDate'
  },
  
  // State machine validation
  {
    type: 'state_machine',
    field: 'status',
    transitions: [
      { from: 'draft', to: ['submitted'] },
      { from: 'submitted', to: ['approved', 'rejected'] },
      { from: 'approved', to: ['active'] }
    ]
  }
]
```

## Workflow Templates

```typescript
workflows: [
  // Field update
  {
    type: 'field_update',
    name: 'set_close_date',
    trigger: {
      on: 'update',
      when: 'stage == "closed_won"'
    },
    actions: [
      { type: 'update_field', field: 'closeDate', value: '$Today' }
    ]
  },
  
  // Send email
  {
    type: 'email_alert',
    name: 'notify_manager',
    trigger: {
      on: 'create',
      when: 'amount > 100000'
    },
    actions: [
      {
        type: 'send_email',
        template: 'high_value_opportunity',
        to: '$Manager'
      }
    ]
  },
  
  // Create related record
  {
    type: 'record_create',
    name: 'create_task',
    trigger: {
      on: 'update',
      when: 'status == "new"'
    },
    actions: [
      {
        type: 'create_record',
        object: 'task',
        fields: {
          subject: 'Follow up: ' + name,
          relatedTo: '$RecordId',
          owner: '$Owner'
        }
      }
    ]
  }
]
```

## View Configuration Templates

### Grid View

```typescript
{
  type: 'list',
  name: 'all_records',
  viewType: 'grid',
  label: 'All Records',
  columns: ['name', 'status', 'createdDate', 'owner'],
  defaultSort: { field: 'createdDate', direction: 'desc' }
}
```

### Kanban View

```typescript
{
  type: 'list',
  name: 'opportunity_kanban',
  viewType: 'kanban',
  label: 'Sales Pipeline',
  groupBy: 'stage',
  cardFields: ['name', 'amount', 'account'],
  sumField: 'amount'
}
```

### Calendar View

```typescript
{
  type: 'list',
  name: 'task_calendar',
  viewType: 'calendar',
  label: 'Task Calendar',
  dateField: 'dueDate',
  titleField: 'subject'
}
```

## Dashboard Template

```typescript
import { defineDashboard } from '@objectstack/spec/ui';

export const SalesDashboard = defineDashboard({
  name: 'sales_dashboard',
  label: 'Sales Dashboard',
  
  layout: {
    type: 'grid',
    columns: 12
  },
  
  widgets: [
    // Metric widget
    {
      type: 'metric',
      title: 'Total Revenue',
      object: 'opportunity',
      aggregation: 'sum',
      field: 'amount',
      size: { w: 3, h: 2 },
      position: { x: 0, y: 0 }
    },
    
    // Chart widget
    {
      type: 'chart',
      title: 'Revenue by Month',
      chartType: 'line',
      object: 'opportunity',
      groupBy: { field: 'closeDate', interval: 'month' },
      aggregations: [
        { field: 'amount', function: 'sum', label: 'Revenue' }
      ],
      size: { w: 6, h: 4 },
      position: { x: 0, y: 2 }
    }
  ]
});
```

## Action Definition Template

```typescript
import { defineAction } from '@objectstack/spec/ui';

export const CloneRecord = defineAction({
  name: 'clone_record',
  label: 'Clone',
  type: 'script',
  icon: 'copy',
  context: 'record',
  script: `
    const newRecord = {...currentRecord};
    delete newRecord.id;
    newRecord.name = newRecord.name + ' (Copy)';
    return createRecord(objectName, newRecord);
  `
});
```

## Permission Configuration Template

```typescript
permissions: [
  {
    profile: 'sales_manager',
    objectPermissions: {
      create: true,
      read: true,
      update: true,
      delete: true
    },
    fieldPermissions: {
      '*': { read: true, edit: true }
    }
  },
  {
    profile: 'sales_rep',
    objectPermissions: {
      create: true,
      read: true,
      update: true,
      delete: false
    },
    recordAccess: {
      type: 'owner_based',
      ownerField: 'owner'
    }
  }
]
```

## System Variables

```typescript
// Current user
owner: { defaultValue: '$CurrentUser' }

// Current date/time
createdDate: { defaultValue: '$Today' }
createdDateTime: { defaultValue: '$Now' }

// Date calculations
dueDate: { defaultValue: '$Today + 7' }  // 7 days later

// In formulas
formula: 'closeDate > $Today'
formula: 'owner == $CurrentUser'
```

## Naming Conventions

```typescript
// ✅ CORRECT

// Filename: snake_case
// customer_account.object.ts

// Object name: snake_case
name: 'customer_account'

// Field names (config keys): camelCase
fields: {
  firstName: { ... },
  accountName: { ... }
}

// Config properties: camelCase
maxLength: 255
defaultValue: 'draft'
relationshipName: 'contacts'

// Type constant exports: PascalCase
export const CustomerAccount: ObjectDefinition = ...
```

## Debugging Checklist

When issues arise, check in order:

1. [ ] File suffix correct? (`*.object.ts`, `*.view.ts`, etc.)
2. [ ] Import statements correct? (`from '@objectstack/spec/...'`)
3. [ ] Type annotation added? (`: ObjectDefinition`)
4. [ ] Object name using snake_case? (`name: 'my_object'`)
5. [ ] Config keys using camelCase? (`maxLength`, `defaultValue`)
6. [ ] Relationship fields have relationshipName?
7. [ ] Validation rules have errorMessage?
8. [ ] Workflows have explicit trigger?
9. [ ] Views specify columns or fields?
10. [ ] TypeScript compilation passes? (`pnpm tsc --noEmit`)

## Quick Commands

```bash
# Build project
pnpm build

# Type check
pnpm tsc --noEmit

# Clean and rebuild
rm -rf dist node_modules
pnpm install
pnpm --filter @objectstack/spec build
```

---

**Version:** 1.0.0  
**For more details:** See [AI Development Guide](./ai-development-guide)
