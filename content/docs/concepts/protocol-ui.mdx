---
title: UI Protocol
description: Server-Driven UI specification for building dynamic, metadata-driven user interfaces.
---

import { Layout, Grid, Calendar, BarChart } from 'lucide-react';

# UI Protocol

The **UI Protocol** defines how user interfaces are described and rendered in ObjectStack. It follows the Server-Driven UI (SDUI) pattern where the backend dictates the layout, structure, and behavior, while the frontend acts as a renderer.

## Overview

Instead of hardcoding forms and views in React/Vue components, you define them declaratively in the UI Protocol. The frontend runtime reads these definitions and dynamically renders the appropriate components.

<Cards>
  <Card
    icon={<Layout />}
    title="App & Navigation"
    description="Define app structure, branding, and navigation menus."
  />
  <Card
    icon={<Grid />}
    title="Views"
    description="ListView (grid/kanban/calendar) and FormView (simple/tabbed/wizard)."
  />
  <Card
    icon={<BarChart />}
    title="Dashboards & Reports"
    description="Analytics dashboards with widgets and interactive reports."
  />
  <Card
    icon={<Layout />}
    title="Themes & Actions"
    description="Customizable themes and user-triggered actions."
  />
</Cards>

## Key Components

### 1. App Definition

The App is the top-level container that defines navigation and branding:

```typescript
import { UI } from '@objectstack/spec';

const app: UI.App = {
  name: 'sales_app',
  label: 'Sales CRM',
  branding: {
    logo: '/assets/logo.svg',
    primaryColor: '#0066CC',
    favicon: '/assets/favicon.ico'
  },
  navigation: [
    {
      type: 'group',
      label: 'Sales',
      items: [
        {
          type: 'object',
          label: 'Accounts',
          object: 'account',
          defaultView: 'all_accounts'
        },
        {
          type: 'object',
          label: 'Opportunities',
          object: 'opportunity',
          defaultView: 'my_opportunities'
        }
      ]
    },
    {
      type: 'dashboard',
      label: 'Sales Dashboard',
      dashboard: 'sales_overview'
    }
  ]
};
```

### 2. ListView

ListViews display collections of records in various formats:

```typescript
const listView: UI.ListView = {
  name: 'all_accounts',
  object: 'account',
  label: 'All Accounts',
  
  // View Type: grid, kanban, calendar, gantt
  type: 'grid',
  
  // Columns for grid view
  columns: [
    {
      field: 'name',
      label: 'Account Name',
      width: 200,
      sortable: true
    },
    {
      field: 'industry',
      label: 'Industry',
      width: 150,
      filterable: true
    },
    {
      field: 'annual_revenue',
      label: 'Revenue',
      width: 150,
      format: 'currency'
    }
  ],
  
  // Default filter
  filter: {
    field: 'active',
    operator: 'equals',
    value: true
  },
  
  // Pagination
  pageSize: 25,
  
  // Actions
  actions: [
    {
      name: 'new_account',
      label: 'New Account',
      type: 'standard',
      action: 'create'
    }
  ]
};
```

#### Kanban View

```typescript
const kanbanView: UI.ListView = {
  name: 'opportunity_pipeline',
  object: 'opportunity',
  label: 'Sales Pipeline',
  type: 'kanban',
  
  kanbanConfig: {
    groupByField: 'stage',
    cardFields: ['name', 'amount', 'close_date'],
    sortBy: { field: 'amount', direction: 'desc' }
  }
};
```

#### Calendar View

```typescript
const calendarView: UI.ListView = {
  name: 'events_calendar',
  object: 'event',
  label: 'Events',
  type: 'calendar',
  
  calendarConfig: {
    startDateField: 'start_date',
    endDateField: 'end_date',
    titleField: 'subject',
    defaultView: 'month' // month, week, day
  }
};
```

### 3. FormView

FormViews define how records are created and edited:

```typescript
const formView: UI.FormView = {
  name: 'account_form',
  object: 'account',
  label: 'Account Details',
  
  // Layout: simple, tabbed, wizard
  layout: 'tabbed',
  
  sections: [
    {
      label: 'Basic Information',
      columns: 2,
      fields: [
        {
          field: 'name',
          required: true,
          span: 2  // Full width
        },
        {
          field: 'phone'
        },
        {
          field: 'website'
        },
        {
          field: 'industry'
        },
        {
          field: 'type'
        }
      ]
    },
    {
      label: 'Financial Information',
      columns: 2,
      fields: [
        { field: 'annual_revenue' },
        { field: 'number_of_employees' }
      ]
    }
  ]
};
```

#### Wizard Layout

```typescript
const wizardForm: UI.FormView = {
  name: 'new_customer_wizard',
  object: 'customer',
  layout: 'wizard',
  
  sections: [
    {
      label: 'Step 1: Basic Info',
      fields: [
        { field: 'name' },
        { field: 'email' }
      ]
    },
    {
      label: 'Step 2: Address',
      fields: [
        { field: 'billing_address' },
        { field: 'shipping_address' }
      ]
    },
    {
      label: 'Step 3: Preferences',
      fields: [
        { field: 'preferred_contact_method' },
        { field: 'newsletter_opt_in' }
      ]
    }
  ]
};
```

### 4. Dashboard

Dashboards combine multiple widgets:

```typescript
const dashboard: UI.Dashboard = {
  name: 'sales_overview',
  label: 'Sales Dashboard',
  
  // Grid layout: 12 columns
  widgets: [
    {
      type: 'chart',
      title: 'Revenue by Month',
      position: { x: 0, y: 0, width: 6, height: 4 },
      config: {
        chartType: 'bar',
        dataSource: 'opportunity',
        groupBy: 'close_date_month',
        aggregation: { field: 'amount', function: 'sum' }
      }
    },
    {
      type: 'metric',
      title: 'Total Pipeline',
      position: { x: 6, y: 0, width: 3, height: 2 },
      config: {
        dataSource: 'opportunity',
        aggregation: { field: 'amount', function: 'sum' },
        filter: { field: 'is_closed', operator: 'equals', value: false }
      }
    },
    {
      type: 'list',
      title: 'Top 10 Deals',
      position: { x: 0, y: 4, width: 12, height: 4 },
      config: {
        dataSource: 'opportunity',
        fields: ['name', 'amount', 'stage'],
        sort: { field: 'amount', direction: 'desc' },
        limit: 10
      }
    }
  ]
};
```

### 5. Report

Reports provide advanced analytics:

```typescript
const report: UI.Report = {
  name: 'revenue_by_region',
  label: 'Revenue by Region and Industry',
  object: 'opportunity',
  
  type: 'matrix', // tabular, summary, matrix
  
  columns: [
    { field: 'industry' }
  ],
  
  rows: [
    { field: 'billing_region' }
  ],
  
  aggregations: [
    {
      field: 'amount',
      function: 'sum',
      label: 'Total Revenue'
    },
    {
      field: 'id',
      function: 'count',
      label: 'Number of Deals'
    }
  ],
  
  filters: [
    {
      field: 'close_date',
      operator: 'between',
      value: ['2024-01-01', '2024-12-31']
    }
  ]
};
```

### 6. Actions

Actions define user-triggered behaviors:

```typescript
const action: UI.Action = {
  name: 'send_email',
  label: 'Send Email',
  object: 'contact',
  
  type: 'custom',
  
  // Parameters for the action
  params: [
    {
      name: 'email_template',
      type: 'select',
      label: 'Email Template',
      required: true
    },
    {
      name: 'schedule_send',
      type: 'datetime',
      label: 'Schedule Send Time'
    }
  ],
  
  // API endpoint to call
  endpoint: '/api/actions/send-email',
  
  // Success message
  successMessage: 'Email sent successfully',
  
  // Show in which contexts
  showOn: ['detail_page', 'list_view']
};
```

### 7. Theme

Customize the look and feel:

```typescript
const theme: UI.Theme = {
  mode: 'light', // light | dark | auto
  
  colors: {
    primary: '#0066CC',
    secondary: '#6B7280',
    success: '#10B981',
    warning: '#F59E0B',
    error: '#EF4444',
    background: '#FFFFFF',
    surface: '#F9FAFB',
    text: '#111827'
  },
  
  typography: {
    fontFamily: 'Inter, system-ui, sans-serif',
    fontSize: {
      xs: '0.75rem',
      sm: '0.875rem',
      base: '1rem',
      lg: '1.125rem',
      xl: '1.25rem'
    }
  },
  
  spacing: {
    xs: '0.25rem',
    sm: '0.5rem',
    md: '1rem',
    lg: '1.5rem',
    xl: '2rem'
  },
  
  borderRadius: {
    sm: '0.25rem',
    md: '0.5rem',
    lg: '0.75rem'
  }
};
```

## Dynamic Rendering

The UI Protocol enables true metadata-driven UIs:

**Backend Definition:**
```typescript
// Define once in protocol
const accountForm: UI.FormView = { /* ... */ };
```

**Frontend Rendering:**
```typescript
// React renderer automatically adapts
<MetadataForm view={accountForm} recordId="123" />

// Vue renderer uses the same definition
<MetadataForm :view="accountForm" :recordId="123" />

// Flutter/Mobile renderer
MetadataFormWidget(view: accountForm, recordId: "123")
```

## Best Practices

1. **Design mobile-first** - Views should work on all screen sizes
2. **Use semantic field ordering** - Most important fields first
3. **Leverage default views** - Define sensible defaults for each object
4. **Create role-specific dashboards** - Different views for different user types
5. **Use conditional visibility** - Show/hide fields based on other field values
6. **Optimize list views** - Only show essential columns by default

## Learn More

- [View Configuration Guide](/docs/guides/view-configuration)
- [App Reference](/docs/references/ui/app/App)
- [ListView Reference](/docs/references/ui/view/ListView)
- [Dashboard Reference](/docs/references/ui/dashboard/Dashboard)
- [Theme Customization](/docs/references/ui/theme/Theme)
