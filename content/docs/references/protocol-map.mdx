---
title: Protocol Architecture Map
description: Visual guide to ObjectStack protocol relationships and dependencies
---


# Protocol Architecture Map

Understand how the 123 ObjectStack protocols fit together to form a complete business platform.

## The Three-Layer Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    APPLICATION LAYER (User-Facing)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   Apps   â”‚  â”‚   Pages  â”‚  â”‚Dashboards â”‚  â”‚ Reports  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  ObjectUI (UI)  â”‚
                    â”‚   10 Protocols  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BUSINESS LOGIC LAYER                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Objects  â”‚  â”‚  Fields  â”‚  â”‚  Queries  â”‚  â”‚  Rules   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ ObjectQL (Data) â”‚
                    â”‚   16 Protocols  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RUNTIME INFRASTRUCTURE LAYER                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Drivers â”‚  â”‚  Events  â”‚  â”‚   Auth    â”‚  â”‚   APIs   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  ObjectOS (Sys) â”‚
                    â”‚  39 Protocols   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Protocol Dependencies

### Core Foundation

The foundation protocols that everything else builds upon:

<Cards>
  <Card 
    href="./shared" 
    title="Shared Protocol"
    description="Common identifiers and utilities used by all protocols"
  />
  <Card 
    href="./system/manifest" 
    title="Manifest Protocol"
    description="Package definition (objectstack.config.ts) - the entry point"
  />
</Cards>

### Layer 1: Data (ObjectQL)

Data layer protocols define business logic and data structure.

```
Field Protocol (Core)
    â†“
    â”œâ†’ Object Protocol (uses Fields)
    â”œâ†’ Query Protocol (references Fields)
    â”œâ†’ Filter Protocol (filters on Fields)
    â””â†’ Validation Protocol (validates Fields)
         â†“
         â””â†’ Hook Protocol (extends validation with code)
```

**Dependencies:**
- `Field` â†’ No dependencies (foundational)
- `Object` â†’ Depends on `Field`, `Validation`
- `Query` â†’ Depends on `Filter`, `Object`
- `Validation` â†’ Depends on `Field`

### Layer 2: UI (ObjectUI)

UI protocols build on top of data protocols.

```
Theme Protocol (Foundation)
    â†“
View Protocol (uses Object, Query)
    â”œâ†’ ListView (uses Query, Filter)
    â”œâ†’ FormView (uses Object, Field)
    â””â†’ Dashboard (uses View, Widget)
         â†“
         â”œâ†’ Page Protocol (composes Views)
         â””â†’ App Protocol (organizes Pages)
              â†“
              â””â†’ Action Protocol (UI interactions)
```

**Dependencies:**
- `Theme` â†’ No data dependencies
- `View` â†’ Depends on `Object`, `Query`, `Filter`
- `Page` â†’ Depends on `View`, `Component`
- `App` â†’ Depends on `Page`, `Dashboard`
- `Action` â†’ Depends on `Flow`, `Workflow`

### Layer 3: System (ObjectOS)

System protocols provide runtime infrastructure.

```
Driver Protocol (Database Abstraction)
    â†“
Datasource Protocol (Connection Config)
    â†“
    â”œâ†’ Context Protocol (Runtime State)
    â”œâ†’ Events Protocol (Event Bus)
    â””â†’ Plugin Protocol (Extensibility)
         â†“
         â”œâ†’ Auth Protocol (Identity)
         â”œâ†’ Permission Protocol (Access Control)
         â”œâ†’ API Protocol (External Access)
         â””â†’ Automation Protocol (Workflows)
              â†“
              â””â†’ AI Protocol (Intelligence)
```

**Key Dependencies:**
- `Driver` â†’ Foundation for all data access
- `Datasource` â†’ Depends on `Driver`
- `Context` â†’ Provides runtime state to all protocols
- `Auth` â†’ Used by `Permission`, `API`, `Automation`
- `Permission` â†’ Depends on `Auth`, `Object`

## Cross-Protocol Relationships

### Example: Building a CRM Contact Form

Here's how multiple protocols work together:

```typescript
// 1. DEFINE DATA (ObjectQL)
// File: objects/contact.object.yml
const contactObject = {
  name: 'contact',           // Object Protocol
  fields: {                  // Field Protocol
    email: {
      type: 'email',
      required: true,
      validation: [          // Validation Protocol
        { rule: 'email_format' }
      ]
    }
  }
};

// 2. CREATE UI (ObjectUI)
// File: views/contact_form.view.yml
const contactForm = {
  type: 'form',              // View Protocol
  object: 'contact',         // References Object Protocol
  layout: {                  // Page Protocol
    sections: [
      { fields: ['email', 'phone'] }
    ]
  },
  theme: 'default'           // Theme Protocol
};

// 3. ADD TO APP (ObjectUI)
// File: apps/crm.app.yml
const crmApp = {
  name: 'crm',               // App Protocol
  navigation: [              // Navigation Items
    {
      type: 'object',
      object: 'contact',
      defaultView: 'contact_form'
    }
  ]
};

// 4. CONFIGURE ACCESS (Permission)
// File: permissions/contact.permission.yml
const contactPermission = {
  object: 'contact',         // Permission Protocol
  roles: ['sales_rep'],      // Auth Protocol
  access: {
    read: true,
    create: true,
    edit: true
  }
};

// 5. ADD AUTOMATION (Automation)
// File: flows/welcome_email.flow.yml
const welcomeFlow = {
  trigger: {                 // Flow Protocol
    object: 'contact',
    event: 'after_insert'
  },
  actions: [
    {
      type: 'email',         // Action Protocol
      template: 'welcome'
    }
  ]
};
```

## Protocol Usage Patterns

### Pattern 1: Data-Driven UI

When UI is automatically generated from data definitions:

```
Object â†’ Field â†’ View â†’ Page â†’ App
```

**Example:** Auto-generated CRUD interfaces

### Pattern 2: Custom UI with Data Binding

When you build custom UI that connects to data:

```
Page â†’ Component â†’ View (Custom) â†’ Query â†’ Object
```

**Example:** Custom dashboard with data visualizations

### Pattern 3: Automation & Integration

When adding business logic automation:

```
Object â†’ Hook â†’ Flow â†’ Automation â†’ API/Webhook
```

**Example:** Lead assignment workflow with Slack notifications

### Pattern 4: AI-Enhanced Applications

When adding AI capabilities:

```
Object â†’ RAG Pipeline â†’ Agent â†’ Conversation â†’ UI
```

**Example:** AI-powered customer support chatbot

## Protocol Categories by Responsibility

### ğŸ—„ï¸ Data Definition
- **Primary:** Field, Object, Validation
- **Secondary:** Dataset, Mapping, Hook

### ğŸ” Data Access
- **Primary:** Query, Filter
- **Secondary:** Driver, Datasource

### ğŸ¨ Presentation
- **Primary:** View, Page, Theme
- **Secondary:** Component, Widget, Block

### ğŸ—ï¸ Application Structure
- **Primary:** App, Manifest
- **Secondary:** Plugin, Feature

### ğŸ“Š Analytics & Reporting
- **Primary:** Report, Dashboard
- **Secondary:** Query (aggregations)

### âš™ï¸ Automation
- **Primary:** Flow, Workflow
- **Secondary:** Approval, Webhook, ETL

### ğŸ” Security
- **Primary:** Auth, Permission
- **Secondary:** RLS, Sharing, Policy

### ğŸŒ External Integration
- **Primary:** API, Connector
- **Secondary:** OData, Realtime, Webhook

### ğŸ¤– AI/ML
- **Primary:** Agent, RAG Pipeline
- **Secondary:** NLQ, Conversation, Model Registry

## Common Integration Points

### ObjectQL â†” ObjectUI
```typescript
// UI consumes data definitions
const view: View = {
  object: 'customer',        // Reference to Object Protocol
  fields: ['name', 'email'], // Reference to Field Protocol
  filters: [...]             // Reference to Filter Protocol
};
```

### ObjectQL â†” ObjectOS
```typescript
// Data is stored via system drivers
const datasource: Datasource = {
  driver: 'postgres',        // Reference to Driver Protocol
  connection: {...}
};

const object: Object = {
  name: 'customer',
  datasource: 'primary'      // Uses system datasource
};
```

### ObjectUI â†” ObjectOS
```typescript
// UI is secured via permission system
const app: App = {
  navigation: [
    {
      object: 'customer',
      visible: 'hasPermission("customer", "read")' // References Permission
    }
  ]
};
```

## Next Steps

<Callout type="tip">
Use this map as a reference when designing your application architecture.
</Callout>

<Cards>
  <Card 
    href="./index" 
    title="Browse All Protocols"
    description="Explore detailed documentation for each protocol"
  />
  <Card 
    href="./quick-reference" 
    title="Quick Reference"
    description="Fast lookup table for all protocols"
  />
  <Card 
    href="../introduction" 
    title="Core Concepts"
    description="Learn the foundational concepts"
  />
</Cards>
