---
title: FilterOperator
description: Supported filter operators for query conditions
---

# FilterOperator

Filter operators define the comparison and logical operations available for filtering data in ObjectStack queries.

## Overview

ObjectStack supports two filter operator systems:

1. **MongoDB-style operators** (Recommended): Modern `$` prefix operators (`$eq`, `$gte`, `$contains`)
2. **Array-based operators** (Legacy): String operators used in array-based filter syntax

## MongoDB-Style Operators (Recommended)

These operators are used with the `FilterCondition` and `QueryFilter` types.

### Equality Operators

| Operator | SQL Equivalent | MongoDB Equivalent | Description |
| :--- | :--- | :--- | :--- |
| `$eq` | `=` | `$eq` | Equal to |
| `$ne` | `!=` or `<>` | `$ne` | Not equal to |

**Examples:**
```typescript
{ status: { $eq: "active" } }
{ status: { $ne: "deleted" } }
```

### Comparison Operators

| Operator | SQL Equivalent | MongoDB Equivalent | Data Types | Description |
| :--- | :--- | :--- | :--- | :--- |
| `$gt` | `>` | `$gt` | number, Date | Greater than |
| `$gte` | `>=` | `$gte` | number, Date | Greater than or equal |
| `$lt` | `<` | `$lt` | number, Date | Less than |
| `$lte` | `<=` | `$lte` | number, Date | Less than or equal |

**Examples:**
```typescript
{ age: { $gt: 18 } }
{ age: { $gte: 18 } }
{ score: { $lt: 100 } }
{ age: { $lte: 65 } }
{ createdAt: { $gte: new Date("2024-01-01") } }
```

### Set Operators

| Operator | SQL Equivalent | MongoDB Equivalent | Description |
| :--- | :--- | :--- | :--- |
| `$in` | `IN (?, ?, ?)` | `$in` | Value in array |
| `$nin` | `NOT IN (?, ?, ?)` | `$nin` | Value not in array |
| `$between` | `BETWEEN ? AND ?` | `$gte` + `$lte` | Between range (inclusive) |

**Examples:**
```typescript
{ role: { $in: ["admin", "editor", "moderator"] } }
{ status: { $nin: ["spam", "deleted", "archived"] } }
{ age: { $between: [18, 65] } }
{ price: { $between: [100, 1000] } }
```

### String Operators

| Operator | SQL Equivalent | MongoDB Equivalent | Description |
| :--- | :--- | :--- | :--- |
| `$contains` | `LIKE '%?%'` | `$regex` | Contains substring (case-sensitive) |
| `$startsWith` | `LIKE '?%'` | `$regex` | Starts with prefix |
| `$endsWith` | `LIKE '%?'` | `$regex` | Ends with suffix |

**Examples:**
```typescript
{ email: { $contains: "@example.com" } }
{ username: { $startsWith: "admin_" } }
{ filename: { $endsWith: ".pdf" } }
{ title: { $contains: "tutorial" } }
```

**Note:** Case sensitivity is handled at the backend/driver level.

### Special Operators

| Operator | SQL Equivalent | MongoDB Equivalent | Description |
| :--- | :--- | :--- | :--- |
| `$null` | `IS NULL` / `IS NOT NULL` | `field: null` | Is null (true) or not null (false) |
| `$exist` | N/A | `$exists` | Field exists (primarily for NoSQL) |

**Examples:**
```typescript
{ deletedAt: { $null: true } }      // IS NULL
{ deletedAt: { $null: false } }     // IS NOT NULL
{ metadata: { $exist: true } }      // Field exists
{ optionalField: { $exist: false } } // Field doesn't exist
```

### Logical Operators

| Operator | SQL Equivalent | MongoDB Equivalent | Description |
| :--- | :--- | :--- | :--- |
| `$and` | `AND` | `$and` | All conditions must be true |
| `$or` | `OR` | `$or` | At least one condition must be true |
| `$not` | `NOT` | `$not` | Negates the condition |

**Examples:**
```typescript
// AND (implicit at same level)
{ status: "active", verified: true }

// AND (explicit)
{ $and: [{ status: "active" }, { age: { $gte: 18 } }] }

// OR
{ $or: [{ role: "admin" }, { role: "editor" }] }

// NOT
{ $not: { status: "deleted" } }

// Complex combination
{
  status: "active",
  $and: [
    {
      $or: [
        { priority: "high" },
        { urgent: true }
      ]
    },
    { assignee: { $null: false } }
  ]
}
```

## Array-Based Operators (Legacy)

These operators are used in the older array-based filter syntax `[field, operator, value]`.

### Allowed Values

* `=` - Equal to
* `!=` - Not equal to
* `<>` - Not equal to (alternative)
* `>` - Greater than
* `>=` - Greater than or equal
* `<` - Less than
* `<=` - Less than or equal
* `startswith` - Starts with prefix
* `contains` - Contains substring
* `notcontains` - Does not contain substring
* `between` - Between range
* `in` - In array
* `notin` - Not in array
* `is_null` - Is null
* `is_not_null` - Is not null

### Examples (Legacy Syntax)

```typescript
// Simple filter
['status', '=', 'active']

// Comparison
['age', '>=', 18]

// String matching
['email', 'contains', '@example.com']
['username', 'startswith', 'admin_']

// Set membership
['role', 'in', ['admin', 'editor']]

// Null check
['deletedAt', 'is_null', true]

// Logical combinations
[
  ['status', '=', 'active'],
  'and',
  ['age', '>=', 18]
]
```

## Migration Guide: Legacy → Modern

### Simple Equality

**Before (Legacy):**
```typescript
['status', '=', 'active']
```

**After (Modern):**
```typescript
{ status: "active" }
// or explicit
{ status: { $eq: "active" } }
```

### Comparison

**Before (Legacy):**
```typescript
['age', '>=', 18]
['score', '<', 100]
```

**After (Modern):**
```typescript
{ age: { $gte: 18 } }
{ score: { $lt: 100 } }
```

### String Operators

**Before (Legacy):**
```typescript
['email', 'contains', '@example.com']
['username', 'startswith', 'admin_']
```

**After (Modern):**
```typescript
{ email: { $contains: "@example.com" } }
{ username: { $startsWith: "admin_" } }
```

### Set Operators

**Before (Legacy):**
```typescript
['role', 'in', ['admin', 'editor']]
['status', 'notin', ['deleted', 'spam']]
```

**After (Modern):**
```typescript
{ role: { $in: ["admin", "editor"] } }
{ status: { $nin: ["deleted", "spam"] } }
```

### Null Checks

**Before (Legacy):**
```typescript
['deletedAt', 'is_null', true]
['deletedAt', 'is_not_null', true]
```

**After (Modern):**
```typescript
{ deletedAt: { $null: true } }
{ deletedAt: { $null: false } }
```

### Logical AND

**Before (Legacy):**
```typescript
[
  ['status', '=', 'active'],
  'and',
  ['age', '>=', 18]
]
```

**After (Modern):**
```typescript
// Implicit AND (recommended)
{
  status: "active",
  age: { $gte: 18 }
}

// Explicit AND
{
  $and: [
    { status: "active" },
    { age: { $gte: 18 } }
  ]
}
```

### Logical OR

**Before (Legacy):**
```typescript
[
  ['role', '=', 'admin'],
  'or',
  ['role', '=', 'editor']
]
```

**After (Modern):**
```typescript
{
  $or: [
    { role: "admin" },
    { role: "editor" }
  ]
}

// Or more concisely
{ role: { $in: ["admin", "editor"] } }
```

## Operator Precedence

When multiple operators are used, they follow this precedence (highest to lowest):

1. Field operators (`$eq`, `$gt`, `$contains`, etc.)
2. `$not`
3. `$and`
4. `$or`

**Example:**
```typescript
{
  status: "active",        // 1. Field operator (implicit $eq)
  $not: { archived: true }, // 2. NOT
  $and: [                  // 3. AND
    { verified: true }
  ],
  $or: [                   // 4. OR (evaluated last)
    { role: "admin" }
  ]
}
```

## Best Practices

### Use Implicit Equality
```typescript
// ✓ Good
{ status: "active" }

// ✗ Unnecessary
{ status: { $eq: "active" } }
```

### Combine Operators on Same Field
```typescript
// ✓ Good
{ age: { $gte: 18, $lte: 65 } }

// ✗ Verbose
{
  $and: [
    { age: { $gte: 18 } },
    { age: { $lte: 65 } }
  ]
}
```

### Use $in for Multiple OR on Same Field
```typescript
// ✓ Good
{ role: { $in: ["admin", "editor", "moderator"] } }

// ✗ Verbose
{
  $or: [
    { role: "admin" },
    { role: "editor" },
    { role: "moderator" }
  ]
}
```

### Prefer $null over Explicit Comparison
```typescript
// ✓ Good
{ deletedAt: { $null: true } }

// ✗ Less clear
{ deletedAt: null }
```

## Database-Specific Notes

### SQL Databases
- `$contains`, `$startsWith`, `$endsWith` map to `LIKE` with wildcards
- `$in` maps to `IN` clause
- `$between` maps to `BETWEEN AND`
- Case sensitivity depends on column collation

### MongoDB
- Operators map directly to MongoDB query operators
- `$regex` used for string operators
- Native support for `$exists`, `$in`, `$nin`

### In-Memory Drivers
- All operators implemented in JavaScript
- String operators are case-sensitive by default
- Performance may vary for large datasets

## See Also

- [FilterCondition](../FilterCondition.mdx) - Recursive filter structure
- [QueryFilter](../QueryFilter.mdx) - Top-level query filter wrapper
- [Query](../types/Query.mdx) - Complete query specification
- [Driver Guide](/docs/guides/custom-driver.mdx) - Implementing operators in custom drivers