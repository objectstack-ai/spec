---
title: MongoDB Driver
description: MongoDB driver configuration schema
---

# MongoDB Driver

<Callout type="info">
**Source:** `packages/spec/src/data/driver/mongo.zod.ts`
</Callout>

## Overview

MongoDB driver configuration schema defines connection settings and capabilities specific to MongoDB databases.

## TypeScript Usage

```typescript
import { MongoConfigSchema, MongoDriverSpec } from '@objectstack/spec/data/driver/mongo';
import type { MongoConfig } from '@objectstack/spec/data/driver/mongo';

// Validate MongoDB configuration
const config: MongoConfig = MongoConfigSchema.parse({
  database: 'myapp',
  host: '127.0.0.1',
  port: 27017,
  username: 'admin',
  password: 'secret',
});
```

---

## MongoConfig

MongoDB connection configuration schema.

### Properties

| Property | Type | Required | Description |
| :--- | :--- | :--- | :--- |
| **url** | `string` | optional | Connection URI. Format: mongodb://[username:password@]host1[:port1][,...hostN[:portN]][/[defaultauthdb][?options]] |
| **database** | `string` | ✅ | Database name (required) |
| **host** | `string` | optional | Hostname (default: '127.0.0.1') |
| **port** | `number` | optional | Port number (default: 27017) |
| **username** | `string` | optional | Username for authentication |
| **password** | `string` | optional | Password for authentication |
| **authSource** | `string` | optional | Authentication database (defaults to admin or database name) |
| **options** | `Record<string, any>` | optional | Extra driver options (ssl, poolSize, etc) |

---

## MongoDriverSpec

The static definition of MongoDB driver capabilities.

### Capabilities

| Capability | Supported | Description |
| :--- | :--- | :--- |
| **transactions** | ✅ | ACID transactions |
| **fullTextSearch** | ✅ | Full-text search indexes |
| **geoSpatial** | ✅ | Geospatial queries |
| **aggregation** | ✅ | Aggregation pipeline |
| **mutableSchema** | ✅ | Dynamic schema changes |
| **jsonField** | ✅ | Native JSON/BSON storage |
| **crossObjectJoin** | ✅ | $lookup aggregation |

---

## Examples

### Basic Configuration

```typescript
const config: MongoConfig = {
  database: 'crm',
  host: '127.0.0.1',
  port: 27017,
  username: 'app_user',
  password: 'secure_password',
};
```

### Connection URI

```typescript
const config: MongoConfig = {
  url: 'mongodb://user:password@localhost:27017/mydb',
  database: 'mydb', // Still required
};
```

### Replica Set Configuration

```typescript
const config: MongoConfig = {
  url: 'mongodb://node1:27017,node2:27017,node3:27017/mydb?replicaSet=rs0',
  database: 'mydb',
  options: {
    replicaSet: 'rs0',
    readPreference: 'secondaryPreferred',
  },
};
```

### SSL Configuration

```typescript
const config: MongoConfig = {
  database: 'production',
  host: 'mongodb.example.com',
  port: 27017,
  username: 'app_user',
  password: 'secure_password',
  authSource: 'admin',
  options: {
    ssl: true,
    sslValidate: true,
    sslCA: '/path/to/ca.pem',
  },
};
```

### Connection Pool Options

```typescript
const config: MongoConfig = {
  database: 'myapp',
  host: 'localhost',
  port: 27017,
  options: {
    poolSize: 20,
    socketTimeoutMS: 30000,
    connectTimeoutMS: 10000,
    serverSelectionTimeoutMS: 5000,
  },
};
```

---

## Related

- [Driver](/docs/references/data/driver) - Base driver protocol
- [Driver NoSQL](/docs/references/data/driver-nosql) - NoSQL driver interface
- [Datasource](/docs/references/system/datasource) - Datasource configuration
