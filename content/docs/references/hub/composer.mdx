---
title: Composer
description: Composer protocol schemas
---

# Cloud Composer Protocol

Defines the interface for the ObjectStack Composer Service.

The Composer is responsible for "compiling" a Tenant's configuration (BOM)

into a single executable System Manifest.

<Callout type="info">
**Source:** `packages/spec/src/hub/composer.zod.ts`
</Callout>

## TypeScript Usage

```typescript
import { BillOfMaterials, ComposerRequest, ComposerResponse, ConflictReport, DependencyRequirement } from '@objectstack/spec/hub';
import type { BillOfMaterials, ComposerRequest, ComposerResponse, ConflictReport, DependencyRequirement } from '@objectstack/spec/hub';

// Validate data
const result = BillOfMaterials.parse(data);
```

---

## BillOfMaterials

### Properties

| Property | Type | Required | Description |
| :--- | :--- | :--- | :--- |
| **tenantId** | `string` | ✅ | Target Tenant ID |
| **dependencies** | `Object[]` | ✅ | Installed packages |
| **environment** | `Record<string, string>` | optional |  |
| **resolutionStrategy** | `Enum<'strict' \| 'override' \| 'merge'>` | optional | Conflict resolution strategy (strict=fail, override=last-wins, merge=deep-merge) |


---

## ComposerRequest

### Properties

| Property | Type | Required | Description |
| :--- | :--- | :--- | :--- |
| **bom** | `Object` | ✅ |  |
| **runtimeVersion** | `string` | optional |  |
| **dryRun** | `boolean` | optional |  |


---

## ComposerResponse

### Properties

| Property | Type | Required | Description |
| :--- | :--- | :--- | :--- |
| **success** | `boolean` | ✅ |  |
| **manifest** | `Object` | optional | The compiled System Manifest |
| **manifestUrl** | `string` | optional | Presigned download URL |
| **buildId** | `string` | ✅ |  |
| **timestamp** | `string` | ✅ |  |
| **duration** | `number` | ✅ | Compilation time in ms |
| **conflicts** | `Object[]` | optional |  |
| **errors** | `string[]` | optional |  |


---

## ConflictReport

### Properties

| Property | Type | Required | Description |
| :--- | :--- | :--- | :--- |
| **resourceType** | `Enum<'object' \| 'field' \| 'api' \| 'ui'>` | ✅ | Type of colliding resource |
| **resourceId** | `string` | ✅ | ID of the resource |
| **sources** | `string[]` | ✅ | List of plugin IDs defining this resource |
| **resolution** | `string` | ✅ | How it was resolved (e.g. "com.example.erp won") |
| **severity** | `Enum<'info' \| 'warning' \| 'error'>` | ✅ | Severity of the conflict |


---

## DependencyRequirement

### Properties

| Property | Type | Required | Description |
| :--- | :--- | :--- | :--- |
| **id** | `string` | ✅ | Plugin ID (e.g. "com.example.crm") |
| **version** | `string` | optional | SemVer range or "latest" |
| **configuration** | `Record<string, any>` | optional | Configuration overrides |
| **features** | `Record<string, boolean>` | optional | Feature toggles |


---

