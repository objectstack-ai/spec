---
title: Discovery
description: Discovery protocol schemas
---

API Discovery Schema

Defines the discovery response returned by the ObjectStack API discovery endpoint.
The `services` map is the **single source of truth** for service availability.

<Callout type="info">
**Source:** `packages/spec/src/api/discovery.zod.ts`
</Callout>

## TypeScript Usage

```typescript
import { ApiRoutes, Discovery, ServiceInfo } from '@objectstack/spec/api';
import type { ApiRoutes, Discovery, ServiceInfo } from '@objectstack/spec/api';

// Validate data
const result = Discovery.parse(data);

// Derive capabilities from services
const isGraphQLEnabled = data.services?.graphql?.enabled ?? false;
const isAIEnabled = data.services?.ai?.enabled ?? false;
```

---

## ApiRoutes

A convenience shortcut providing a flat endpoint map for client routing.
These routes are derived from the `services` map.

### Properties

| Property | Type | Required | Description |
| :--- | :--- | :--- | :--- |
| **data** | `string` | ✅ | e.g. /api/v1/data |
| **metadata** | `string` | ✅ | e.g. /api/v1/meta |
| **ui** | `string` | optional | e.g. /api/v1/ui |
| **auth** | `string` | optional | e.g. /api/v1/auth |
| **automation** | `string` | optional | e.g. /api/v1/automation |
| **storage** | `string` | optional | e.g. /api/v1/storage |
| **analytics** | `string` | optional | e.g. /api/v1/analytics |
| **graphql** | `string` | optional | e.g. /graphql |
| **packages** | `string` | optional | e.g. /api/v1/packages |
| **workflow** | `string` | optional | e.g. /api/v1/workflow |
| **realtime** | `string` | optional | e.g. /api/v1/realtime |
| **notifications** | `string` | optional | e.g. /api/v1/notifications |
| **ai** | `string` | optional | e.g. /api/v1/ai |
| **i18n** | `string` | optional | e.g. /api/v1/i18n |


---

## Discovery

### Properties

| Property | Type | Required | Description |
| :--- | :--- | :--- | :--- |
| **name** | `string` | ✅ |  |
| **version** | `string` | ✅ |  |
| **environment** | `Enum<'production' \| 'sandbox' \| 'development'>` | ✅ |  |
| **routes** | `Object` | ✅ | Convenience endpoint map derived from services |
| **locale** | `Object` | ✅ |  |
| **services** | `Record<string, ServiceInfo>` | ✅ | Per-service availability map keyed by CoreServiceName |
| **metadata** | `Record<string, any>` | optional | Custom metadata key-value pairs for extensibility |

> **Note:** The `capabilities`/`features` field has been removed. Service availability
> is now derived from the `services` map using `services[name].enabled`.

---

## ServiceInfo

### Properties

| Property | Type | Required | Description |
| :--- | :--- | :--- | :--- |
| **enabled** | `boolean` | ✅ |  |
| **status** | `Enum<'available' \| 'unavailable' \| 'degraded' \| 'stub'>` | ✅ | available = fully operational, unavailable = not installed, degraded = partial, stub = placeholder that throws |
| **route** | `string` | optional | e.g. /api/v1/analytics |
| **provider** | `string` | optional | e.g. "objectql", "plugin-redis", "driver-memory" |
| **message** | `string` | optional | e.g. "Install plugin-workflow to enable" |


---

