---
title: Analytics Protocol
description: Specification for Analytical Queries (OLAP), Datasets, and Aggregation types.
---

ObjectQL distinguishes between Transactional (OLTP) and Analytical (OLAP) workloads.
The Analytics Specification defines how to define **Datasets** (Cubes) and query them efficiently.

## 1. Datasets

A Dataset is a semantic layer over one or more Objects, optimized for aggregation.

```yaml
# opportunity.dataset.yml
name: opportunity_analysis
label: Opportunity Analysis
root_object: opportunity
measures:
  - name: sum_amount
    function: sum
    field: amount
dimensions:
  - field: account.industry
  - field: close_date
    granularity: month
```

## 2. Aggregation Queries

Analytical queries return grouped data rather than record lines.

```json
// POST /api/v4/analytics/query
{
  "dataset": "opportunity_analysis",
  "dimensions": ["account.industry"],
  "measures": ["sum_amount"],
  "filters": [
    ["stage", "=", "Closed Won"]
  ]
}
```

### Response Format
```json
[
  { "account.industry": "Technology", "sum_amount": 5000000 },
  { "account.industry": "Finance", "sum_amount": 2500000 }
]
```

## 3. Visualization Mapping

The protocol includes hints for UI rendering.

*   `chartType`: Default visualization (bar, line, pie).
*   `colorScale`: Semantic coloring rules.
