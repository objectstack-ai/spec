---
title: Transaction Model
description: ACID definitions and the Trigger Execution Pipeline.
---

ObjectStack guarantees **Atomic** operations for all mutations.

## 1. Isolation Levels
*   **Default:** `Read Committed`.
*   ObjectQL drivers map this to the underlying database transaction capabilities.

## 2. The Execution Pipeline (Trigger Order)

When a record is saved, the Kernel executes the following idempotent steps.

1.  **System Validation:** Check primitive types (string length, number format).
2.  **Before Triggers:**
    *   Execute `beforeInsert` / `beforeUpdate` scripts.
    *   Useful for setting explicit default values or manipulating input.
3.  **User Validation:**
    *   Execute custom `Validation Rules` (declarative).
    *   Execute `validate` scripts.
4.  **Database Commit:**
    *   The record is written to the DB.
    *   Locks are held.
5.  **After Triggers:**
    *   Execute `afterInsert` / `afterUpdate` scripts.
    *   Useful for updating related records (Rollups).
6.  **Workflow & Automation:**
    *   Evaluate Workflow Rules.
    *   Launch Processes (Flows).
    *   Enqueue Asynchronous Jobs.
7.  **Final Commit:** Transaction complete.

## 3. Atomic Batching

If you send an array of 100 records to be inserted, strict atomicity applies:
*   **All or Nothing:** If record #99 fails validation, records #1-#98 are rolled back.
*   **Exception:** If `allOrNone: false` header is set, partial success is allowed (common for bulk data loading).
