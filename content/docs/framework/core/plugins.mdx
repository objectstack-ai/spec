---
title: Plugin Development
description: How to build extensions for ObjectStack
---

# Plugin Development

Plugins are the building blocks of ObjectStack. A plugin is a plain JavaScript/TypeScript object (or class) that conforms to the `Plugin` interface.

## Anatomy of a Plugin

```typescript
import type { Plugin, PluginContext } from '@objectstack/core';

export class MyPlugin implements Plugin {
    // Identity
    name = 'com.example.myplugin';
    version = '1.0.0';
    description = 'An example plugin';
    
    // Dependencies (Optional)
    dependencies = {
        '@objectstack/runtime': '^1.0.0'
    };

    // Configuration Schema (Optional Zod Schema)
    configSchema = z.object({
        apiKey: z.string()
    });

    // 1. Initialization
    async init(ctx: PluginContext) {
        // Register services here
        const myService = new MyService();
        ctx.registerService('my-service', myService);
    }

    // 2. Startup
    async start(ctx: PluginContext) {
        // Resolve other services
        const db = ctx.getService('database');
        await db.connect();
    }

    // 3. Shutdown
    async stop(ctx: PluginContext) {
        // Cleanup
    }
}
```

## The Plugin Context

The `PluginContext` is passed to every lifecycle hook. It is the plugin's gateway to the Kernel.

| Method | Description |
| :--- | :--- |
| `ctx.logger` | A structured logger scoped to this plugin (e.g., labeled `[com.example.plugin]`). |
| `ctx.registerService(name, impl)` | Expose a capability to other plugins. |
| `ctx.getService(name)` | Retrieve a capability from another plugin. |
| `ctx.hook(event, callback)` | Listen for system events. |
| `ctx.emit(event, payload)` | Broadcast an event. |

## Best Practices

1.  **Prefix Names**: Use reverse domain notation (e.g., `com.mycompany.plugin`) to avoid collisions.
2.  **Define Contracts**: If your plugin exposes a service, export a TypeScript interface for it so consumers can type-check.
3.  **Config Validation**: Use `configSchema` (Zod) to validate user input. The Kernel automatically validates this before `init` is called.
