---
title: Development Standards
description: Best practices and coding standards for developing enterprise management software applications using the ObjectStack Protocol
---

# CRM Application Development Standards & Specifications

æœ¬æ–‡æ¡£å®šä¹‰äº†åŸºäºŽObjectStackåè®®å¼€å‘ä¼ä¸šç®¡ç†è½¯ä»¶åº”ç”¨å¸‚åœºçš„æœ€ä½³æ–¹æ¡ˆå’Œç¼–å†™è§„èŒƒã€‚
This document defines best practices and coding standards for developing enterprise management software applications using the ObjectStack Protocol.

---

## ðŸ“ 1. Folder Structure Standards

### Recommended Structure

```
app-name/
â”œâ”€â”€ docs/                           # ðŸ“š Documentation
â”‚   â”œâ”€â”€ README.md                   # Master guide
â”‚   â”œâ”€â”€ 01-data-modeling.md         # Data design standards
â”‚   â”œâ”€â”€ 02-business-logic.md        # Business rules
â”‚   â”œâ”€â”€ 03-ui-design.md             # Interface design
â”‚   â”œâ”€â”€ 04-analytics.md             # Reports & dashboards
â”‚   â”œâ”€â”€ 05-security.md              # Security model
â”‚   â”œâ”€â”€ 06-automation.md            # Workflows & flows
â”‚   â”œâ”€â”€ 07-integration.md           # External systems
â”‚   â””â”€â”€ 08-ai-capabilities.md       # AI & ML features
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ domains/                    # ðŸ“Š Domain Objects (DDD)
â”‚   â”‚   â”œâ”€â”€ sales/                  # Sales domain
â”‚   â”‚   â”‚   â”œâ”€â”€ *.object.ts         # Object definitions
â”‚   â”‚   â”‚   â””â”€â”€ *.hook.ts           # Event hooks
â”‚   â”‚   â”œâ”€â”€ service/                # Service domain
â”‚   â”‚   â”œâ”€â”€ marketing/              # Marketing domain
â”‚   â”‚   â”œâ”€â”€ products/               # Product catalog
â”‚   â”‚   â””â”€â”€ analytics/              # Analytics & BI
â”‚   â”œâ”€â”€ ui/                         # ðŸŽ¨ User Interface
â”‚   â”‚   â”œâ”€â”€ apps.ts                 # Application definitions
â”‚   â”‚   â”œâ”€â”€ views.ts                # List & form views
â”‚   â”‚   â”œâ”€â”€ actions.ts              # Custom actions
â”‚   â”‚   â”œâ”€â”€ dashboards.ts           # Dashboard configs
â”‚   â”‚   â””â”€â”€ reports.ts              # Report definitions
â”‚   â”œâ”€â”€ security/                   # ðŸ”’ Security
â”‚   â”‚   â”œâ”€â”€ profiles.ts             # User profiles
â”‚   â”‚   â”œâ”€â”€ permission-sets.ts      # Permission sets
â”‚   â”‚   â””â”€â”€ sharing-rules.ts        # Sharing model
â”‚   â”œâ”€â”€ automation/                 # âš¡ Automation
â”‚   â”‚   â”œâ”€â”€ flows.ts                # Visual flows
â”‚   â”‚   â”œâ”€â”€ workflows.ts            # Workflow rules
â”‚   â”‚   â””â”€â”€ triggers.ts             # Database triggers
â”‚   â”œâ”€â”€ ai/                         # ðŸ¤– AI & Machine Learning
â”‚   â”‚   â”œâ”€â”€ agents.ts               # AI agents
â”‚   â”‚   â”œâ”€â”€ rag-pipelines.ts        # RAG configs
â”‚   â”‚   â””â”€â”€ models.ts               # ML models
â”‚   â”œâ”€â”€ integration/                # ðŸ”— Integration
â”‚   â”‚   â”œâ”€â”€ connectors.ts           # External connectors
â”‚   â”‚   â”œâ”€â”€ webhooks.ts             # Webhook handlers
â”‚   â”‚   â””â”€â”€ apis.ts                 # Custom APIs
â”‚   â””â”€â”€ server/                     # ðŸ–¥ï¸ Backend
â”‚       â”œâ”€â”€ apis.ts                 # REST/GraphQL APIs
â”‚       â””â”€â”€ index.ts                # Server entry
â”œâ”€â”€ tests/                          # ðŸ§ª Tests
â”‚   â”œâ”€â”€ unit/                       # Unit tests
â”‚   â”œâ”€â”€ integration/                # Integration tests
â”‚   â””â”€â”€ e2e/                        # End-to-end tests
â”œâ”€â”€ objectstack.config.ts           # âš™ï¸ Main configuration
â”œâ”€â”€ package.json
â””â”€â”€ README.md                       # Project overview
```

### Key Principles

1. **Domain-Driven Design**: Organize objects by business domain, not by type
2. **Separation of Concerns**: Keep data, UI, security, and automation separate
3. **Clear Naming**: Use descriptive folder and file names
4. **Documentation-First**: Comprehensive docs for every module

---

## ðŸ“Š 2. Data Modeling Standards

### Object Definition Pattern

```typescript
import { ObjectSchema, Field } from '@objectstack/spec/data';

export const MyObject = ObjectSchema.create({
  // âœ… Metadata (Required)
  name: 'my_object',              // Machine name (snake_case)
  label: 'My Object',             // Display name
  pluralLabel: 'My Objects',      // Plural form
  icon: 'icon-name',              // Icon identifier
  description: '...',             // Help text
  
  // âœ… Display Configuration
  titleFormat: '{field1} - {field2}',
  compactLayout: ['field1', 'field2', 'field3'],
  
  // âœ… Fields Definition
  fields: {
    // Use Field.* helpers
    field_name: Field.text({
      label: 'Field Label',
      required: true,
    }),
  },
  
  // âœ… Performance
  indexes: [
    { fields: ['field_name'], unique: false },
  ],
  
  // âœ… Capabilities
  enable: {
    trackHistory: true,
    searchable: true,
    apiEnabled: true,
    files: true,
    feeds: true,
  },
  
  // âœ… Business Rules
  validations: [...],
  workflows: [...],
});
```

### Field Type Selection Guide

| Data Type | Field Type | Use Case |
|-----------|-----------|----------|
| Short text | `Field.text()` | Names, codes, short strings |
| Long text | `Field.textarea()` | Descriptions, notes |
| Rich content | `Field.markdown()` | Formatted text with links |
| Number | `Field.number()` | Quantities, counts |
| Money | `Field.currency()` | Prices, revenues |
| Percentage | `Field.percent()` | Rates, ratios |
| Date | `Field.date()` | Birthdays, deadlines |
| Date+Time | `Field.datetime()` | Timestamps, appointments |
| Yes/No | `Field.boolean()` | Flags, toggles |
| Choice | `Field.select()` | Status, category, type |
| Multiple choice | `Field.select({ multiple: true })` | Tags, skills |
| Reference | `Field.lookup()` | Relationships |
| Location | `Field.location()` | GPS coordinates |
| Address | `Field.address()` | Mailing addresses |
| Color | `Field.color()` | Brand colors, themes |
| Auto-number | `Field.autonumber()` | Sequential IDs |
| Calculated | `Field.formula()` | Computed values |

### Relationship Patterns

```typescript
// âœ… Simple Lookup (Many-to-One)
account: Field.lookup('account', {
  label: 'Account',
  required: true,
})

// âœ… Filtered Lookup
contact: Field.lookup('contact', {
  label: 'Contact',
  referenceFilters: {
    account: '{account}',     // Same account
    is_active: true,
  }
})

// âœ… Self-Referencing (Hierarchy)
parent_account: Field.lookup('account', {
  label: 'Parent Account',
})
```

---

## ðŸŽ¨ 3. UI Design Standards

### Application Structure

```typescript
import { App } from '@objectstack/spec/ui';

App.create({
  name: 'app_name',
  label: 'App Name',
  icon: 'icon-name',
  branding: {
    primaryColor: '#4169E1',
    secondaryColor: '#00AA00',
    logo: '/assets/logo.png',
  },
  
  navigation: [
    {
      id: 'group_sales',
      type: 'group',
      label: 'Sales',
      children: [
        { id: 'nav_account', type: 'object', objectName: 'account', label: 'Accounts' },
        { id: 'nav_dashboard', type: 'dashboard', dashboardName: 'sales_dashboard' },
      ]
    }
  ]
});
```

### Dashboard Best Practices

```typescript
// âœ… Use meaningful names
name: 'sales_dashboard',

// âœ… Group related metrics
widgets: [
  // Row 1: KPIs
  { type: 'metric', ... },
  
  // Row 2: Charts
  { type: 'bar', ... },
  
  // Row 3: Lists
  { type: 'table', ... },
]

// âœ… Use grid layout
layout: { x: 0, y: 0, w: 3, h: 2 }
```

---

## ðŸ”’ 4. Security Standards

### Profile Structure

```typescript
export const MyProfile: Profile = {
  name: 'profile_name',
  label: 'Profile Label',
  
  // Object permissions (CRUD)
  objectPermissions: {
    account: {
      create: true,
      read: true,
      update: true,
      delete: false,
      viewAll: false,
      modifyAll: false,
    },
  },
  
  // Field permissions
  fieldPermissions: {
    account: {
      sensitive_field: { read: false, update: false },
    },
  },
  
  // Tab visibility
  tabVisibility: {
    account: 'default',     // Default tab
    lead: 'available',      // Available but not default
    admin: 'hidden',        // Hidden
  },
};
```

### Sharing Rule Pattern

```typescript
export const MySharingRule: SharingRule = {
  name: 'rule_name',
  objectName: 'object_name',
  type: 'criteria_based',
  
  criteria: {
    field: { $eq: 'value' },
  },
  
  sharedWith: {
    type: 'role',
    roles: ['role_name'],
  },
  
  accessLevel: 'read_write',
};
```

---

## âš¡ 5. Automation Standards

### Flow Definition

```typescript
export const MyFlow: Flow = {
  name: 'flow_name',
  label: 'Flow Label',
  description: 'What this flow does',
  type: 'autolaunched',  // or 'screen', 'scheduled'
  
  triggerType: 'on_create',
  objectName: 'object_name',
  criteria: 'condition',
  
  variables: [...],
  
  steps: [
    {
      id: 'step_1',
      type: 'record_lookup',
      ...
    },
  ],
};
```

### Workflow Rule Pattern

```typescript
workflows: [
  {
    name: 'workflow_name',
    objectName: 'object_name',
    triggerType: 'on_update',
    criteria: 'ISCHANGED(field)',
    actions: [
      {
        name: 'action_name',
        type: 'field_update',
        field: 'field_name',
        value: 'value',
      }
    ],
    active: true,
  }
]
```

---

## ðŸ¤– 6. AI Configuration Standards

### AI Agent Pattern

```typescript
export const MyAgent: Agent = {
  name: 'agent_name',
  label: 'Agent Label',
  description: 'What this agent does',
  
  role: 'assistant',  // or 'worker', 'analyst', 'creator'
  
  instructions: `Clear instructions for the AI...`,
  
  model: {
    provider: 'openai',
    model: 'gpt-4',
    temperature: 0.7,
    maxTokens: 2000,
  },
  
  tools: [...],
  knowledge: {...},
  triggers: [...],
};
```

### RAG Pipeline Pattern

```typescript
export const MyRAG: RagPipeline = {
  name: 'rag_name',
  label: 'RAG Label',
  
  indexes: [
    {
      name: 'index_name',
      type: 'vector',
      sources: [...],
      embedding: {...},
      chunking: {...},
    }
  ],
  
  retrieval: {
    strategy: 'hybrid',
    vectorSearch: {...},
  },
  
  generation: {
    model: {...},
    promptTemplate: `...`,
  },
};
```

---

## ðŸ“ 7. Naming Conventions

### Configuration Keys (TypeScript)
âœ… Use **camelCase** for all TypeScript property names:
```typescript
maxLength: 255
referenceFilters: {...}
defaultValue: true
primaryColor: '#4169E1'
```

### Data Values (Machine Names)
âœ… Use **snake_case** for all data identifiers:
```typescript
name: 'account_number'
objectName: 'opportunity'
field: 'close_date'
status: 'in_progress'
```

### Object Names
âœ… Use **snake_case**, singular, descriptive:
```typescript
'account'           // âœ… Good
'contact'           // âœ… Good
'opportunity'       // âœ… Good

'Account'           // âŒ Bad (PascalCase)
'accounts'          // âŒ Bad (plural)
'opp'              // âŒ Bad (abbreviation)
```

### Field Names
âœ… Use **snake_case**, descriptive, no suffixes:
```typescript
'first_name'        // âœ… Good
'annual_revenue'    // âœ… Good
'is_active'         // âœ… Good (boolean prefix)
'account'           // âœ… Good (lookup without _id)

'firstName'         // âŒ Bad (camelCase)
'revenue'           // âŒ Bad (not descriptive)
'active'            // âŒ Bad (boolean without prefix)
'account_id'        // âŒ Bad (lookup with _id suffix)
```

---

## ðŸ“š 8. Documentation Standards

### Required Documentation

Every application must include:

1. **README.md** - Project overview, quick start, features
2. **docs/data-modeling** - Object and field design
3. **docs/business-logic** - Validations, workflows
4. **docs/security** - Security model
5. **docs/ai-capabilities** - AI features (if applicable)

### Documentation Template

```markdown
# [Module Name]

Brief description of what this module does.

## Table of Contents

1. [Section 1](#section-1)
2. [Section 2](#section-2)

---

## Section 1

Content with examples...

### Subsection

```typescript
// Code example
```

### Best Practices

âœ… **DO:**
- Item 1
- Item 2

âŒ **DON'T:**
- Item 1
- Item 2
```

---

## ðŸ§ª 9. Testing Standards

### Test Structure

```
tests/
â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ objects/
â”‚   â”‚   â””â”€â”€ account.test.ts
â”‚   â”œâ”€â”€ validations/
â”‚   â””â”€â”€ workflows/
â”œâ”€â”€ integration/
â”‚   â”œâ”€â”€ flows/
â”‚   â””â”€â”€ apis/
â””â”€â”€ e2e/
    â””â”€â”€ scenarios/
```

### Test Pattern

```typescript
import { describe, test, expect } from 'vitest';

describe('Account Object', () => {
  test('should create account with valid data', async () => {
    const account = await createRecord('account', {
      name: 'Test Company',
      type: 'prospect',
    });
    
    expect(account.name).toBe('Test Company');
  });
  
  test('should validate required fields', async () => {
    await expect(
      createRecord('account', {})
    ).rejects.toThrow('Name is required');
  });
});
```

---

## âœ… 10. Review Checklist

### Before Committing

- [ ] All objects use `ObjectSchema.create()`
- [ ] Field names are `snake_case`
- [ ] Config keys are `camelCase`
- [ ] Lookups don't have `_id` suffix
- [ ] All validations have clear messages
- [ ] Documentation is up to date
- [ ] Tests pass
- [ ] No security vulnerabilities
- [ ] Code follows conventions

### Before Deployment

- [ ] All objects have proper indexes
- [ ] Security profiles configured
- [ ] Sharing rules tested
- [ ] AI agents tested
- [ ] Flows tested end-to-end
- [ ] Performance benchmarks met
- [ ] Documentation complete
- [ ] User training materials ready

---

## ðŸŽ¯ Summary

Follow these standards to build:
- **Maintainable** code that's easy to understand
- **Scalable** applications that grow with your business
- **Secure** systems with enterprise-grade protection
- **Intelligent** solutions powered by AI
- **Well-documented** projects that teams can collaborate on

---

**For more details, refer to individual documentation files in the `docs/` folder.**
